/*! For license information please see index.js.LICENSE.txt */
var regeneratorRuntime;
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MPServerless=t():e.MPServerless=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./node_modules/@alicloud/mpserverless-core/dist/index.js":function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"../../node_modules/_process@0.11.10@process/browser.js":function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var a,u=[],l=!1,f=-1;function p(){if(l&&a){l=!1;a.length?u=a.concat(u):f=-1;u.length&&d()}}function d(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){a=u;u=[];for(;++f<t;)a&&a[f].run();f=-1;t=u.length}a=null;l=!1;!function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t));1!==u.length||l||s(d)};function h(e,t){this.fun=e;this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)};o.title="browser";o.browser=!0;o.env={};o.argv=[];o.version="";o.versions={};function y(){}o.on=y;o.addListener=y;o.once=y;o.off=y;o.removeListener=y;o.removeAllListeners=y;o.emit=y;o.prependListener=y;o.prependOnceListener=y;o.listeners=function(e){return[]};o.binding=function(e){throw new Error("process.binding is not supported")};o.cwd=function(){return"/"};o.chdir=function(e){throw new Error("process.chdir is not supported")};o.umask=function(){return 0}},"../../node_modules/_util@0.11.1@util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}},"../../node_modules/_util@0.11.1@util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"../../node_modules/_util@0.11.1@util/util.js":function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,c=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<i;a=n[++r])y(a)||!j(a)?c+=" "+a:c+=" "+s(a);return c};t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n);o=!0}return r.apply(this,arguments)}};var i,c={};t.debuglog=function(r){b(i)&&(i=e.env.NODE_DEBUG||"");r=r.toUpperCase();if(!c[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;c[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else c[r]=function(){};return c[r]};function s(e,r){var n={seen:[],stylize:u};arguments.length>=3&&(n.depth=arguments[2]);arguments.length>=4&&(n.colors=arguments[3]);h(r)?n.showHidden=r:r&&t._extend(n,r);b(n.showHidden)&&(n.showHidden=!1);b(n.depth)&&(n.depth=2);b(n.colors)&&(n.colors=!1);b(n.customInspect)&&(n.customInspect=!0);n.colors&&(n.stylize=a);return l(n,e,n.depth)}t.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function u(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&x(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);v(o)||(o=l(e,o,n));return o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var c=Object.keys(r),s=function(e){var t={};e.forEach((function(e,r){t[e]=!0}));return t}(c);e.showHidden&&(c=Object.getOwnPropertyNames(r));if(w(r)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return f(r);if(0===c.length){if(x(r)){var a=r.name?": "+r.name:"";return e.stylize("[Function"+a+"]","special")}if(g(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return f(r)}var u,j="",O=!1,S=["{","}"];if(d(r)){O=!0;S=["[","]"]}x(r)&&(j=" [Function"+(r.name?": "+r.name:"")+"]");g(r)&&(j=" "+RegExp.prototype.toString.call(r));_(r)&&(j=" "+Date.prototype.toUTCString.call(r));w(r)&&(j=" "+f(r));if(0===c.length&&(!O||0==r.length))return S[0]+j+S[1];if(n<0)return g(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);u=O?function(e,t,r,n,o){for(var i=[],c=0,s=t.length;c<s;++c)E(t,String(c))?i.push(p(e,t,r,n,String(c),!0)):i.push("");o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))}));return i}(e,r,n,s,c):c.map((function(t){return p(e,r,n,s,t,O)}));e.seen.pop();return function(e,t,r){return e.reduce((function(e,t){t.indexOf("\n");return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,j,S)}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var c,s,a;(a=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(s=e.stylize("[Setter]","special"));E(n,o)||(c="["+o+"]");s||(e.seen.indexOf(a.value)<0?(s=y(r)?l(e,a.value,null):l(e,a.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special"));if(b(c)){if(i&&o.match(/^\d+$/))return s;if((c=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){c=c.substr(1,c.length-2);c=e.stylize(c,"name")}else{c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");c=e.stylize(c,"string")}}return c+": "+s}function d(e){return Array.isArray(e)}t.isArray=d;function h(e){return"boolean"==typeof e}t.isBoolean=h;function y(e){return null===e}t.isNull=y;t.isNullOrUndefined=function(e){return null==e};function m(e){return"number"==typeof e}t.isNumber=m;function v(e){return"string"==typeof e}t.isString=v;t.isSymbol=function(e){return"symbol"==typeof e};function b(e){return void 0===e}t.isUndefined=b;function g(e){return j(e)&&"[object RegExp]"===O(e)}t.isRegExp=g;function j(e){return"object"==typeof e&&null!==e}t.isObject=j;function _(e){return j(e)&&"[object Date]"===O(e)}t.isDate=_;function w(e){return j(e)&&("[object Error]"===O(e)||e instanceof Error)}t.isError=w;function x(e){return"function"==typeof e}t.isFunction=x;t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e};t.isBuffer=r("../../node_modules/_util@0.11.1@util/support/isBufferBrowser.js");function O(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))};t.inherits=r("../../node_modules/_util@0.11.1@util/node_modules/inherits/inherits_browser.js");t._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0});return t}function t(){for(var t,r,n=new Promise((function(e,n){t=e;r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}Object.setPrototypeOf(t,Object.getPrototypeOf(e));T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(t,n(e))};t.promisify.custom=T;function A(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e;e=r}return t(e)}t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,c=function(){return o.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(c,null,t)}),(function(t){e.nextTick(A,t,c)}))}Object.setPrototypeOf(r,Object.getPrototypeOf(t));Object.defineProperties(r,n(t));return r}}).call(this,r("../../node_modules/_process@0.11.10@process/browser.js"))},"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"ErrorClass",(function(){return m}));r.d(t,"MPServerlessErrorClass",(function(){return b}));r.d(t,"bizError",(function(){return g}));r.d(t,"assert",(function(){return j}));r.d(t,"camelToLisp",(function(){return _}));r.d(t,"emptyLogger",(function(){return O}));r.d(t,"HTTPMethod",(function(){return w}));r.d(t,"TransportProtocol",(function(){return x}));r.d(t,"SERVERLESS_HEADER_PREFIX",(function(){return k}));r.d(t,"PREFIX",(function(){return S}));r.d(t,"Validator",(function(){return R}));r.d(t,"BaseEncoder",(function(){return F}));r.d(t,"HTTPRequestEncoder",(function(){return U}));r.d(t,"BaseDecoder",(function(){return ee}));r.d(t,"HTTPResponseDecoder",(function(){return te}));r.d(t,"HTTPTransport",(function(){return ie}));r.d(t,"BaseService",(function(){return se}));r.d(t,"MPServerlessCore",(function(){return le}));r("./src/thirdParty/runtime.es5.js");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&d(e,t)}function s(e){var t=p();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,h(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return d(r,e)})(e)}function f(e,t,r){return(f=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));r&&d(o,r.prototype);return o}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var m=function(e){c(r,e);var t=s(r);function r(e,n){var o;i(this,r);y(u(o=t.call(this)),"code",void 0);y(u(o),"message",void 0);Error.captureStackTrace&&Error.captureStackTrace(u(o),o.constructor);o.code=o.constructor.code;o.message=o.constructor.prefix;n&&(o.message+=": ".concat(n));e instanceof Error?o.message="".concat(o.message," << ").concat(e.message):"string"==typeof e&&(o.message="".concat(o.message,": ").concat(e));return o}return r}(l(Error));y(m,"code",void 0);y(m,"prefix",void 0);var v=function(){function e(){i(this,e);y(this,"code",void 0);y(this,"message",void 0)}!function(e,t,r){t&&o(e.prototype,t)}(e,[{key:"setCode",value:function(e){this.code=e;return this}},{key:"setMessage",value:function(e){this.message=e;return this}},{key:"build",value:function(){var e,t,r=this.code,n=this.message;return t=e=function(e){c(r,e);var t=s(r);function r(){i(this,r);return t.apply(this,arguments)}return r}(m),y(e,"code",r),y(e,"prefix",n),t}}]);return e}();function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:"MPServerlessError",message:"MPServerless Error"},r=new v;return Object.keys(e).reduce((function(n,o){n[o]=r.setCode(e[o].code||t.code).setMessage(e[o].message||t.message).build();return n}),{})}var g=b({ValidationError:{code:"ValidationFailed",message:"参数校验错误"}});function j(e,t){if(!e)throw new g.ValidationError(t)}function _(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}var w,x,O={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}};!function(e){e.GET="GET";e.DEL="DELETE";e.POST="POST"}(w||(w={}));!function(e){e.HTTP="HTTP"}(x||(x={}));var S,k="x-serverless-";!function(e){e.CLIENT="/client";e.SERVER="/server";e.ANTCLOUD="/antcloud";e.ANTOPENANTCLOUD="/antopen/antcloud"}(S||(S={}));var P=r("./src/thirdParty/parameter.es5.js"),E=r.n(P);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);!function(e,t,r){"p"in e?Object.defineProperty(e,"p",{value:r,enumerable:!0,configurable:!0,writable:!0}):e.p=r}(this,0,void 0);this.p=new E.a(t)}!function(e,t,r){t&&A(e.prototype,t)}(e,[{key:"validate",value:function(e,t){if("object"!==T(t)&&"string"==typeof e){t={field:t};e={field:e}}var r=this.p.validate(e,t);if(!r)return null;var n=r.map((function(e){if(e.field){for(var r=JSON.parse(JSON.stringify(t)),n=e.field.match(/[^\.\[\]]+/g);n.length;){var o=n.shift();if(!r.hasOwnProperty(o))break;r=r[o]}e.value=r}return e}));throw new g.ValidationError(function e(t){return Array.isArray(t)?t.map(e).join("; "):"".concat(t.field," ").concat(t.message)}(n))}}]);return e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function z(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var F=function e(){N(this,e)},U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&q(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return z(this,r)}}(r);function r(e,n){var o;N(this,r);(o=t.call(this)).endpoint=e;L(M(o),"body",{});L(M(o),"query",{});L(M(o),"method",w.POST);L(M(o),"prefix","");L(M(o),"baseHeaders",{});L(M(o),"serviceHeaders",{});L(M(o),"serverlessHeaders",{});L(M(o),"baseUrl",void 0);n&&(o.prefix=n);return o}!function(e,t,r){t&&C(e.prototype,t)}(r,[{key:"encodeAsHTTPRequestObject",value:function(e){return{url:"",data:{},method:w.POST,headers:{}}}},{key:"sign",value:function(e){}},{key:"url",get:function(){return[this.endpoint+this.prefix].filter((function(e){return!!e})).join("?")}},{key:"headers",get:function(){var e=this,t=Object.keys(this.serverlessHeaders).reduce((function(t,r){t["".concat(k).concat(_(r))]=e.serverlessHeaders[r];return t}),{});return I(I({},this.baseHeaders),t)}},{key:"setBodyField",value:function(e){this.body=Object.assign({},this.body,I({},e));return this}},{key:"setUserId",value:function(e){this.setBodyField({userId:e});return this}},{key:"setBaseHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseHeaders=I(I({},this.baseHeaders),Object.keys(e).reduce((function(t,r){e[r]&&(t[r]=e[r].toString());return t}),{}));return this}},{key:"setServerlessHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.serverlessHeaders=I(I({},this.serverlessHeaders),Object.keys(e).reduce((function(t,r){e[r]&&(t[r]=e[r].toString());return t}),{}));return this}},{key:"encode",value:function(){this.body.params&&(this.body.params=JSON.stringify(this.body.params));return{url:this.url,data:this.body,method:this.method,headers:this.headers}}}]);return r}(F);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function J(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ee=function e(){Q(this,e)},te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&V(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var o=X(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return J(this,r)}}(r);function r(){var e;Q(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];Z($(e=t.call.apply(t,[this].concat(o))),"_body",{});Z($(e),"_error",void 0);Z($(e),"_status",void 0);Z($(e),"_headers",{});return e}!function(e,t,r){t&&W(e.prototype,t)}(r,[{key:"setHeaders",value:function(e){this._headers=K(K({},this._headers),e)}},{key:"setStatusAndBody",value:function(e,t){this._status=e;this._body=t}},{key:"setErrorMessage",value:function(e){this._error=new Error(e)}},{key:"setErrorObject",value:function(e){this._error=e}},{key:"decode",value:function(){return{body:this._body||{},error:this._error,status:this._status,headers:this._headers}}}]);return r}(ee);function re(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function oe(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.endpoint=t;oe(this,"authType",void 0);oe(this,"protocol",x.HTTP);oe(this,"logger",void 0);oe(this,"appId",void 0);oe(this,"appSecret",void 0);oe(this,"spaceId",void 0);oe(this,"timeout",void 0);oe(this,"ua",void 0)}!function(e,t,r){t&&ne(e.prototype,t)}(e,[{key:"getEncoder",value:function(e){return new U(this.endpoint,e)}},{key:"setAppId",value:function(e){this.appId=e}},{key:"setAppSecret",value:function(e){this.appSecret=e;return this}},{key:"setUA",value:function(e){this.ua=e;return this}},{key:"setLogger",value:function(e){this.logger=e}},{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5s";if("string"==typeof e){if(e.indexOf("ms")>=0){this.timeout=parseInt(e,10);return}if(e.indexOf("s")>=0){this.timeout=1e3*parseInt(e,10);return}}else if("number"==typeof e){this.timeout=e;return}this.timeout=5e3}},{key:"timeoutOption",get:function(){return this.timeout}},{key:"spaceIdOption",get:function(){return this.spaceId}},{key:"setSpaceId",value:function(e){this.spaceId=e}},{key:"request",value:function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){re(i,n,o,c,s,"next",e)}function s(e){re(i,n,o,c,s,"throw",e)}c(void 0)}))}}(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(new te).decode());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]);return e}();function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}var se=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.transport=t}!function(e,t,r){t&&ce(e.prototype,t)}(e,[{key:"getEncoder",value:function(e){return this.transport.getEncoder(e)}}]);return e}();function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function ue(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);ue(this,"options",void 0);ue(this,"_debug",void 0);ue(this,"_logger",void 0);ue(this,"transport",void 0);j(t,"options is required");j(t.spaceId,"spaceId is required");j(t.endpoint,"endpoint is required");this._debug=!1;this._logger=t.logger||O;this.options=t;this.createTransport(t)}!function(e,t,r){t&&ae(e.prototype,t)}(e,[{key:"setDebugFlag",value:function(e){this._debug=e;this.transport.setLogger(this.logger)}},{key:"debug",get:function(){return this._debug}},{key:"logger",get:function(){return this._debug?this._logger:O}},{key:"createTransport",value:function(e){var t=e.httpTransport;this.transport=new t(e.endpoint);this.transport.setAppId(e.appId);this.transport.setLogger(this.logger);this.transport.setSpaceId(e.spaceId);this.transport.setTimeout(e.timeout)}}]);return e}()},"./src/thirdParty/parameter.es5.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}(),i=r("../../node_modules/_util@0.11.1@util/util.js"),c=/^\d{4}\-\d{2}\-\d{2}$/,s=/^\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}$/,a=/^\d+$/,u=/^[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+(?:\.[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i,l=/^[\w\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\]\{\}\|\;\:\'\"\,\<\.\>\/\?]+$/,f=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);"function"==typeof(t=t||{}).translate&&(this.translate=t.translate);t.validateRoot&&(this.validateRoot=!0);t.convert&&(this.convert=!0);t.widelyUndefined&&(this.widelyUndefined=!0)}o(e,[{key:"t",value:function(){var e=Array.prototype.slice.call(arguments);return"function"==typeof this.translate?this.translate.apply(this,e):i.format.apply(i,e)}},{key:"validate",value:function(e,t){if("object"!==(void 0===e?"undefined":n(e)))throw new TypeError("need object type rule");if(this.validateRoot&&("object"!==(void 0===t?"undefined":n(t))||!t))return[{message:this.t("the validated value should be a object"),code:this.t("invalid"),field:void 0}];var r=[];for(var o in e){var i=y(e[o]),c=t[o];"string"==typeof c&&!0===i.trim&&(c=t[o]=c.trim());var s=this.widelyUndefined;"widelyUndefined"in i&&(s=i.widelyUndefined);s&&(""===c||null===c||Number.isNaN(c))&&(c=t[o]=void 0);if(null!=c){var a=d[i.type];if(!a)throw new TypeError("rule type must be one of "+Object.keys(d).join(", ")+", but the following type was passed: "+i.type);m(i,t,o,this.convert);var u=a.call(this,i,t[o],t);"string"==typeof u&&r.push({message:u,code:this.t("invalid"),field:o});Array.isArray(u)&&u.forEach((function(e){var t="object"===i.type?".":"";e.field=o+t+e.field;r.push(e)}))}else{!1!==i.required&&r.push({message:this.t("required"),field:o,code:this.t("missing_field")});"default"in i&&(t[o]=i.default)}}return r.length?r:void 0}}]);return e}();e.exports=p;p.prototype.addRule=p.addRule=function(e,t,r,n){if(!e)throw new TypeError("`type` required");if("string"==typeof r||"function"==typeof r){n=r;r=!0}"boolean"!=typeof r&&(r=!0);if(!r&&d[e])throw new TypeError("rule `"+e+"` exists");if(n){if("string"!=typeof n&&"function"!=typeof n)throw new TypeError("convertType should be string or function");p.CONVERT_MAP[e]=n}if("function"!=typeof t){if(!(t instanceof RegExp))throw new TypeError("check must be function or regexp");d[e]=function(e,r){return b.call(this,{format:t},r)}}else d[e]=t};var d=p.TYPE_MAP={number:function(e,t){return"number"!=typeof t||isNaN(t)?this.t("should be a number"):e.hasOwnProperty("max")&&t>e.max?this.t("should smaller than %s",e.max):e.hasOwnProperty("min")&&t<e.min?this.t("should bigger than %s",e.min):void 0},int:v,integer:v,string:b,id:function(e,t){return b.call(this,{format:a,allowEmpty:e.allowEmpty},t)},date:function(e,t){return b.call(this,{format:c,allowEmpty:e.allowEmpty},t)},dateTime:g,datetime:g,boolean:j,bool:j,array:function(e,t){if(!Array.isArray(t))return this.t("should be an array");if(e.hasOwnProperty("max")&&t.length>e.max)return this.t("length should smaller than %s",e.max);if(e.hasOwnProperty("min")&&t.length<e.min)return this.t("length should bigger than %s",e.min);if(e.itemType){var r=this,n=d[e.itemType];if(!n)throw new TypeError("rule type must be one of "+Object.keys(d).join(", ")+", but the following type was passed: "+e.itemType);var o=[],i="object"===e.itemType?e:e.rule||y(e.itemType);t.forEach((function(e,t){var c="["+t+"]",s=n.call(r,i,e);"string"==typeof s&&o.push({field:c,message:s,code:r.t("invalid")});Array.isArray(s)&&(o=o.concat(s.map((function(e){e.field=c+"."+e.field;e.message=e.message;return e}))))}));return o}},object:function(e,t){return"object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)?this.t("should be an object"):e.rule?this.validate(e.rule,t):void 0},enum:function(e,t){if(!Array.isArray(e.values))throw new TypeError("check enum need array type values");if(-1===e.values.indexOf(t))return this.t("should be one of %s",e.values.join(", "))},email:function(e,t){return b.call(this,{format:u,message:e.message||this.t("should be an email"),allowEmpty:e.allowEmpty},t)},password:function(e,t,r){e.min||(e.min=6);e.format=l;var n=b.call(this,e,t);return n||(e.compare&&r[e.compare]!==t?this.t("should equal to %s",e.compare):void 0)},url:function(e,t){return b.call(this,{format:f,message:e.message||this.t("should be a url"),allowEmpty:e.allowEmpty},t)}},h=p.CONVERT_MAP={number:"number",int:"int",integer:"int",string:"string",id:"string",date:"string",dateTime:"string",datetime:"string",boolean:"bool",bool:"bool",email:"string",password:"string",url:"string"};function y(e){"string"==typeof(e=e||{})?e={type:e}:Array.isArray(e)?e={type:"enum",values:e}:e instanceof RegExp&&(e={type:"string",format:e});if(e.type&&"?"===e.type[e.type.length-1]){e.type=e.type.slice(0,-1);e.required=!1}return e}function m(e,t,r,o){var i;o&&(i=h[e.type]);e.convertType&&(i=e.convertType);if(i){var c=t[r];if("object"!==(void 0===c?"undefined":n(c)))if("function"!=typeof i)switch(i){case"int":t[r]=parseInt(c,10);break;case"string":t[r]=String(c);break;case"number":t[r]=Number(t[r]);break;case"bool":case"boolean":t[r]=!!c;break;default:"function"==typeof h[i]&&(t[r]=h[e.type](t[r]))}else t[r]=i(c,t)}}function v(e,t){return"number"!=typeof t||t%1!=0?this.t("should be an integer"):e.hasOwnProperty("max")&&t>e.max?this.t("should smaller than %s",e.max):e.hasOwnProperty("min")&&t<e.min?this.t("should bigger than %s",e.min):void 0}function b(e,t){if("string"!=typeof t)return this.t("should be a string");e.hasOwnProperty("allowEmpty")||!1!==e.required||(e.allowEmpty=!0);var r=e.hasOwnProperty("allowEmpty")?e.allowEmpty:e.empty;if(!t){if(r)return;return this.t("should not be empty")}return e.hasOwnProperty("max")&&t.length>e.max?this.t("length should smaller than %s",e.max):e.hasOwnProperty("min")&&t.length<e.min?this.t("length should bigger than %s",e.min):e.format&&!e.format.test(t)?e.message||this.t("should match %s",e.format):void 0}function g(e,t){return b.call(this,{format:s,allowEmpty:e.allowEmpty},t)}function j(e,t){if("boolean"!=typeof t)return this.t("should be a boolean")}},"./src/thirdParty/runtime.es5.js":function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0});return e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function a(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new x(n||[]);i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}r.method=o;r.arg=i;for(;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n){n="completed";throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var a=u(e,t,r);if("normal"===a.type){n=r.done?"completed":"suspendedYield";if(a.arg===l)continue;return{value:a.arg,done:r.done}}if("throw"===a.type){n="completed";r.method="throw";r.arg=a.arg}}}}(e,r,c);return i}e.wrap=a;function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var l={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(O([])));m&&m!==t&&r.call(m,o)&&(h=m);var v=d.prototype=f.prototype=Object.create(h);p.prototype=d;s(v,"constructor",d);s(d,"constructor",p);p.displayName=s(d,c,"GeneratorFunction");function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))};e.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,d);else{e.__proto__=d;s(e,c,"GeneratorFunction")}e.prototype=Object.create(v);return e};e.awrap=function(e){return{__await:e}};function g(e,t){var n;this._invoke=function(o,i){function c(){return new t((function(n,c){!function n(o,i,c,s){var a=u(e[o],e,i);if("throw"!==a.type){var l=a.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e;c(l)}),(function(e){return n("throw",e,c,s)}))}s(a.arg)}(o,i,n,c)}))}return n=n?n.then(c,c):c()}}b(g.prototype);s(g.prototype,i,(function(){return this}));e.AsyncIterator=g;e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new g(a(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))};function j(e,t){var r=e.iterator[t.method];if(void 0===r){t.delegate=null;if("throw"===t.method){if(e.iterator.return){t.method="return";t.arg=void 0;j(e,t);if("throw"===t.method)return l}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type){t.method="throw";t.arg=n.arg;t.delegate=null;return l}var o=n.arg;if(!o){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return l}if(!o.done)return o;t[e.resultName]=o.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=void 0}t.delegate=null;return l}b(v);s(v,c,"Generator");s(v,o,(function(){return this}));s(v,"toString",(function(){return"[object Generator]"}));function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(_,this);this.reset(!0)}e.keys=function(e){var t=[];for(var r in e)t.push(r);t.reverse();return function r(){for(;t.length;){var n=t.pop();if(n in e){r.value=n;r.done=!1;return r}}r.done=!0;return r}};function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n)){t.value=e[n];t.done=!1;return t}t.value=void 0;t.done=!0;return t};return i.next=i}}return{next:S}}e.values=O;function S(){return{value:void 0,done:!0}}x.prototype={constructor:x,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=void 0;this.done=!1;this.delegate=null;this.method="next";this.arg=void 0;this.tryEntries.forEach(w);if(!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){c.type="throw";c.arg=e;t.next=r;if(n){t.method="next";t.arg=void 0}return!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),a=r.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var c=i?i.completion:{};c.type=e;c.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return l}return this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);w(r);return l}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:O(e),resultName:t,nextLoc:r};"next"===this.method&&(this.arg=void 0);return l}};return e}(e.exports);try{regeneratorRuntime=n}catch(e){}}})},"./node_modules/@alicloud/mpserverless-miniapp-core/dist/index.js":function(e,t,r){e.exports=function(e,t,r,n,o,i){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./node_modules/crypto-js/core.js":function(e,t,r){e.exports=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;e.prototype=t;r=new e;e.prototype=null;return r}}(),n={},o=n.lib={},i=o.Base={extend:function(e){var t=r(this);e&&t.mixIn(e);t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)});t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[];this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;this.clamp();if(n%4)for(var i=0;i<o;i++){var c=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=c<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)t[n+i>>>2]=r[i>>>2];this.sigBytes+=o;return this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8;t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){for(var r,n=[],o=function(t){t=t;var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;o/=4294967296;return(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(r||e.random()));r=987654071*s();n.push(4294967296*s()|0)}return new c.init(n,t)}}),s=n.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16));n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new c.init;this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e));this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,s=o/(4*i),a=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,u=e.min(4*a,o);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(n,l);var f=n.splice(0,a);r.sigBytes-=u}return new c.init(f,u)},clone:function(){var e=i.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0}),p=(o.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){f.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math);return e}()},"./node_modules/crypto-js/hmac-md5.js":function(e,t,r){e.exports=function(e){return e.HmacMD5}(r("./node_modules/crypto-js/core.js"),r("./node_modules/crypto-js/md5.js"),r("./node_modules/crypto-js/hmac.js"))},"./node_modules/crypto-js/hmac.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init;"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t));t.clamp();for(var i=this._oKey=t.clone(),c=this._iKey=t.clone(),s=i.words,a=c.words,u=0;u<r;u++){s[u]^=1549556828;a[u]^=909522486}i.sigBytes=c.sigBytes=o;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}})}()}(r("./node_modules/crypto-js/core.js"))},"./node_modules/crypto-js/md5.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.WordArray,i=n.Hasher,c=r.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=c.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,c=e[t+0],a=e[t+1],d=e[t+2],h=e[t+3],y=e[t+4],m=e[t+5],v=e[t+6],b=e[t+7],g=e[t+8],j=e[t+9],_=e[t+10],w=e[t+11],x=e[t+12],O=e[t+13],S=e[t+14],k=e[t+15],P=i[0],E=i[1],T=i[2],A=i[3];P=u(P,E,T,A,c,7,s[0]);A=u(A,P,E,T,a,12,s[1]);T=u(T,A,P,E,d,17,s[2]);E=u(E,T,A,P,h,22,s[3]);P=u(P,E,T,A,y,7,s[4]);A=u(A,P,E,T,m,12,s[5]);T=u(T,A,P,E,v,17,s[6]);E=u(E,T,A,P,b,22,s[7]);P=u(P,E,T,A,g,7,s[8]);A=u(A,P,E,T,j,12,s[9]);T=u(T,A,P,E,_,17,s[10]);E=u(E,T,A,P,w,22,s[11]);P=u(P,E,T,A,x,7,s[12]);A=u(A,P,E,T,O,12,s[13]);T=u(T,A,P,E,S,17,s[14]);P=l(P,E=u(E,T,A,P,k,22,s[15]),T,A,a,5,s[16]);A=l(A,P,E,T,v,9,s[17]);T=l(T,A,P,E,w,14,s[18]);E=l(E,T,A,P,c,20,s[19]);P=l(P,E,T,A,m,5,s[20]);A=l(A,P,E,T,_,9,s[21]);T=l(T,A,P,E,k,14,s[22]);E=l(E,T,A,P,y,20,s[23]);P=l(P,E,T,A,j,5,s[24]);A=l(A,P,E,T,S,9,s[25]);T=l(T,A,P,E,h,14,s[26]);E=l(E,T,A,P,g,20,s[27]);P=l(P,E,T,A,O,5,s[28]);A=l(A,P,E,T,d,9,s[29]);T=l(T,A,P,E,b,14,s[30]);P=f(P,E=l(E,T,A,P,x,20,s[31]),T,A,m,4,s[32]);A=f(A,P,E,T,g,11,s[33]);T=f(T,A,P,E,w,16,s[34]);E=f(E,T,A,P,S,23,s[35]);P=f(P,E,T,A,a,4,s[36]);A=f(A,P,E,T,y,11,s[37]);T=f(T,A,P,E,b,16,s[38]);E=f(E,T,A,P,_,23,s[39]);P=f(P,E,T,A,O,4,s[40]);A=f(A,P,E,T,c,11,s[41]);T=f(T,A,P,E,h,16,s[42]);E=f(E,T,A,P,v,23,s[43]);P=f(P,E,T,A,j,4,s[44]);A=f(A,P,E,T,x,11,s[45]);T=f(T,A,P,E,k,16,s[46]);P=p(P,E=f(E,T,A,P,d,23,s[47]),T,A,c,6,s[48]);A=p(A,P,E,T,b,10,s[49]);T=p(T,A,P,E,S,15,s[50]);E=p(E,T,A,P,m,21,s[51]);P=p(P,E,T,A,x,6,s[52]);A=p(A,P,E,T,h,10,s[53]);T=p(T,A,P,E,_,15,s[54]);E=p(E,T,A,P,a,21,s[55]);P=p(P,E,T,A,g,6,s[56]);A=p(A,P,E,T,k,10,s[57]);T=p(T,A,P,E,v,15,s[58]);E=p(E,T,A,P,O,21,s[59]);P=p(P,E,T,A,y,6,s[60]);A=p(A,P,E,T,w,10,s[61]);T=p(T,A,P,E,d,15,s[62]);E=p(E,T,A,P,j,21,s[63]);i[0]=i[0]+P|0;i[1]=i[1]+E|0;i[2]=i[2]+T|0;i[3]=i[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;r[o>>>5]|=128<<24-o%32;var i=t.floor(n/4294967296),c=n;r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);r[14+(o+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);e.sigBytes=4*(r.length+1);this._process();for(var s=this._hash,a=s.words,u=0;u<4;u++){var l=a[u];a[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});function u(e,t,r,n,o,i,c){var s=e+(t&r|~t&n)+o+c;return(s<<i|s>>>32-i)+t}function l(e,t,r,n,o,i,c){var s=e+(t&n|r&~n)+o+c;return(s<<i|s>>>32-i)+t}function f(e,t,r,n,o,i,c){var s=e+(t^r^n)+o+c;return(s<<i|s>>>32-i)+t}function p(e,t,r,n,o,i,c){var s=e+(r^(t|~n))+o+c;return(s<<i|s>>>32-i)+t}r.MD5=i._createHelper(a);r.HmacMD5=i._createHmacHelper(a)}(Math);return e.MD5}(r("./node_modules/crypto-js/core.js"))},"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"MPHTTPRequestEncoder",(function(){return x}));r.d(t,"MPHTTPResponseDecoder",(function(){return O}));r.d(t,"MPHTTPTransport",(function(){return I}));r.d(t,"HighFileSevice",(function(){return U}));r.d(t,"MPServerlessMiniAppCore",(function(){return oe}));var n=r("@alicloud/mpserverless-core"),o=r("./node_modules/crypto-js/core.js"),i=r.n(o),c=r("./node_modules/crypto-js/hmac-md5.js"),s=r.n(c),a=Object(n.MPServerlessErrorClass)({UnauthorizedError:{code:"UnauthorizedError",message:"未授权错误"},InterfaceRequestError:{code:"InterfaceRequestError",message:"接口请求错误"}});function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function m(e,t,r){t&&y(e.prototype,t);r&&y(e,r);return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&function(e,t){(Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var x=function(e){v(r,e);var t=b(r);function r(e,o){var i;h(this,r);(i=t.call(this,e)).spaceId=o;w(j(i),"prefix",n.PREFIX.CLIENT);w(j(i),"serviceHeaders",{});i.setBodyField({spaceId:o});return i}m(r,[{key:"sign",value:function(e){var t=this.body,r=t.spaceId,n=t.method,o=t.params,c=t.token,a=t.userId,u=Date.now();this.setBodyField({timestamp:u});var l="",f={spaceId:r,timestamp:u,method:n,params:JSON.stringify(o),token:c,userId:a};Object.keys(f).sort().forEach((function(e){f[e]&&(l="".concat(l,"&").concat(e,"=").concat(f[e]))}));l=l.slice(1);try{var p=s()(l,e).toString(i.a.enc.Hex);this.setServerlessHeaders({sign:p})}catch(e){throw e}}},{key:"encodeAsHTTPRequestObject",value:function(e){this.body.params&&(this.body.params=JSON.stringify(this.body.params));return d({url:this.url,data:this.body,method:this.method,headers:this.headers,dataType:"json"},e)}},{key:"clone",value:function(){var e=new r(this.endpoint,this.spaceId);e.setBodyField(this.body);e.setBaseHeaders(this.baseHeaders);e.setServerlessHeaders(this.serverlessHeaders);return e}}]);return r}(n.HTTPRequestEncoder),O=function(e){v(r,e);var t=b(r);function r(){var e;h(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];w(j(e=t.call.apply(t,[this].concat(o))),"ERROR_CODES",[11,12,13,14,19,20]);return e}m(r,[{key:"setStatusAndBody",value:function(e,t){f(_(r.prototype),"setStatusAndBody",this).call(this,e,t);this.ERROR_CODES.indexOf(e)>=0&&(this._error=new a.InterfaceRequestError("错误码 ".concat(e.toString(),", 请参考对应开放平台文档排查问题")))}},{key:"decode",value:function(e){this.setHeaders(e.headers||{});var t=e.data||e.body;"string"==typeof t&&(t=JSON.parse(t));if(t&&"data"in t){if(null==t.data)t.result=null;else if(Number(t.data.affectedDocs)===t.data.affectedDocs)t=Object.assign({},t,d({},t.data));else if("[object Object]"===Object.prototype.toString.call(t.data))t.result=Object.assign({},t.data);else if("[object Array]"===Object.prototype.toString.call(t.data)){var n=function(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.data);t.result=n.slice(0)}else t.result=t.data;delete t.data}if(/^request:fail+/.test(e.errMsg)){this.setErrorMessage(e.errMsg);return f(_(r.prototype),"decode",this).call(this)}var o=parseInt(e.error,10);if(o){this.setStatusAndBody(o,t);return f(_(r.prototype),"decode",this).call(this)}var i=e.err;if(i){this.setErrorMessage(i);return f(_(r.prototype),"decode",this).call(this)}if(e instanceof Error){this.setErrorObject(e);return f(_(r.prototype),"decode",this).call(this)}if(t&&"object"===u(t.error)){this.setErrorObject(t.error);return f(_(r.prototype),"decode",this).call(this)}var c=parseInt(e.status||e.statusCode,10);if(c){this.setStatusAndBody(c,t);return f(_(r.prototype),"decode",this).call(this)}this.setStatusAndBody(200,e);return f(_(r.prototype),"decode",this).call(this)}}]);return r}(n.HTTPResponseDecoder);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){k(i,n,o,c,s,"next",e)}function s(e){k(i,n,o,c,s,"throw",e)}c(void 0)}))}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&T(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return A(this,r)}}(r);function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);D(R(n=t.call(this,e)),"userService",void 0);D(R(n),"httpRequest",void 0);return n}!function(e,t,r){t&&E(e.prototype,t)}(r,[{key:"setUserService",value:function(e){this.userService=e}},{key:"setRequest",value:function(e){Object(n.assert)(e,"初始化时缺少 request 参数");this.httpRequest=e}},{key:"getEncoder",value:function(e){return new x(this.endpoint,this.spaceId)}},{key:"request",value:function(){var e=P(regeneratorRuntime.mark((function e(t){var r,n,o,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>1&&void 0!==s[1]&&s[1];n=t.clone();e.next=4;return this.userService.setRequestToken(t,r);case 4:o=e.sent;this.ua&&o.setBaseHeaders({"x-serverless-ua":this.ua});e.prev=6;i=o.encodeAsHTTPRequestObject({timeout:this.timeout,dataType:"json"});this.logger.info("request encode data",i);e.next=11;return this.httpRequest(i);case 11:c=e.sent;return e.abrupt("return",c);case 15:e.prev=15;e.t0=e.catch(6);this.logger.error("request error",e.t0);if("GATEWAY_INVALID_TOKEN"!==e.t0.error.code&&"InvalidParameter.InvalidToken"!==e.t0.error.code){e.next=25;break}if(!r){e.next=22;break}throw new a.UnauthorizedError("授权 token 已过期，重新获取失败");case 22:e.next=24;return this.request(n,!0);case 24:return e.abrupt("return",e.sent);case 25:if(!e.t0.error){e.next=27;break}throw e.t0.error;case 27:throw e.t0;case 28:case"end":return e.stop()}}),e,this,[[6,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"wrapApi",value:function(e){var t=this;return function(){var r=P(regeneratorRuntime.mark((function r(n){var o,i,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e(n);case 2:o=r.sent;t.logger.info("completed request");t.logger.info(JSON.stringify(o,null,2));i=new O;if(!(c=i.decode(o)).error){r.next=9;break}throw c;case 9:return r.abrupt("return",c);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}]);return r}(n.HTTPTransport);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function M(e,t,r){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function L(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&H(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}(r);function r(e,o){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(N(i=t.call(this,e,o)),"getFileUploadInfo",void 0);Object(n.assert)(o.getFileUploadInfo,"[MPFileService]初始化时缺少 getFileUploadInfo 参数");i.getFileUploadInfo=o.getFileUploadInfo;return i}!function(e,t,r){t&&z(e.prototype,t)}(r,[{key:"uploadFile",value:function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){q(i,n,o,c,s,"next",e)}function s(e){q(i,n,o,c,s,"throw",e)}c(void 0)}))}}(regeneratorRuntime.mark((function e(t){var o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(n.assert)(t,"options required");Object(n.assert)(t.filePath&&"string"==typeof t.filePath,"[MPFileService]调用 uploadFile 缺少 filePath 参数");e.next=4;return this.getFileUploadInfo({filePath:t.filePath});case 4:o=e.sent;i=o.body,c=i.fileSize,s=i.fileExtension;!t.fileSize&&c&&(t.fileSize=c);!t.extension&&s&&(t.extension=s);"string"==typeof t.fileSize&&(t.fileSize=parseInt(t.fileSize));e.next=11;return M(F(r.prototype),"uploadFile",this).call(this,t);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]);return r}(r("@alicloud/mp-file-service").MPFileService),G=r("@alicloud/mp-proxy-service"),Y=r("@alicloud/mp-db-service"),K=r("@alicloud/mp-user-service"),W=r("@alicloud/mp-function-service");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function Z(e,t,r){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function ee(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Q(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var o=re(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ee(this,r)}}(r);function r(e,o){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);ne(te(i=t.call(this,$($({},o),{},{httpTransport:I,options:e.logger}))),"db",void 0);ne(te(i),"file",void 0);ne(te(i),"user",void 0);ne(te(i),"function",void 0);ne(te(i),"network",void 0);Object(n.assert)(o.clientSecret,"clientSecret is required");Object(n.assert)(o.appId,"appId is required");i.user=new K.UserService(i.transport,{getAuthCode:i.transport.wrapApi(e.getAuthCode),request:i.transport.wrapApi(e.request),appId:o.appId,appSecret:o.clientSecret,isvAppId:o.isvAppId,ua:i.ua});i.transport.setUserService(i.user);i.transport.setRequest(i.transport.wrapApi(e.request));i.db=new Y.DbService(i.transport);i.file=new U(i.transport,{uploadFile:i.transport.wrapApi(e.uploadFile),getFileUploadInfo:i.transport.wrapApi(e.getFileUploadInfo)});i.function=new W.FunctionService(i.transport);i.network=new G.ProxyService(i.transport);return i}!function(e,t,r){t&&X(e.prototype,t)}(r,[{key:"version",get:function(){return"3.1.1"}},{key:"ua",get:function(){return"pkg_name:@alicloud/mpserverless-sdk;ver:3.1.1;"}},{key:"createTransport",value:function(e){Z(re(r.prototype),"createTransport",this).call(this,e);this.transport.setAppSecret(e.clientSecret).setUA(this.ua)}}]);return r}(n.MPServerlessCore)},"@alicloud/mp-db-service":function(t,r){t.exports=e},"@alicloud/mp-file-service":function(e,r){e.exports=t},"@alicloud/mp-function-service":function(e,t){e.exports=r},"@alicloud/mp-proxy-service":function(e,t){e.exports=n},"@alicloud/mp-user-service":function(e,t){e.exports=o},"@alicloud/mpserverless-core":function(e,t){e.exports=i}})}(r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-db-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-file-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-function-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-proxy-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-user-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-db-service/dist/index.js":function(e,t,r){e.exports=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"DbService",(function(){return ze}));var n=r("@alicloud/mpserverless-core");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&i(e.prototype,t);r&&i(e,r);return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&function(e,t){(Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=["i","m","u","g"];function d(e){return Array.isArray(e)}function h(e){return null!==e&&"object"===f(e)&&!d(e)}function y(e){return"string"==typeof e||function(e,t){return Object.prototype.toString.call(e)==="[object ".concat("String","]")}(e)}var m=function(e){s(r,e);var t=a(r);function r(){o(this,r);return t.apply(this,arguments)}c(r,[{key:"encode",value:function(e){var t=this;return e instanceof RegExp?this.toRegexp(e):e instanceof Date?this.toDate(e):d(e)?e.map((function(e){return t.encode(e)})):h(e)?Object.keys(e).reduce((function(r,n){r[n]=t.encode(e[n]);return r}),{}):e}},{key:"toDate",value:function(e){return e.toISOString()}},{key:"toRegexp",value:function(e){return"/".concat(e.source.replace(/\\\//g,"/"),"/").concat(e.flags)}}]);return r}(n.BaseEncoder),v=function(e){s(r,e);var t=a(r);function r(){o(this,r);return t.apply(this,arguments)}c(r,[{key:"decode",value:function(e){var t=this;return this.isDate(e)?this.toDate(e):d(e)?e.map((function(e){return t.decode(e)})):h(e)?Object.keys(e).reduce((function(r,n){r[n]=t.decode(e[n]);return r}),{}):e}},{key:"isDate",value:function(e){return y(e)&&/^\d{4}\-\d{2}\-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)&&!isNaN(Date.parse(e))}},{key:"isRegexp",value:function(e){if(y(e)){var t=!0,r=e.split("/"),n=r[r.length-1];n&&(t=n.split("").reduce((function(e,t){return!0===e&&p.indexOf(t)>-1}),!0));return r.length>=2&&t}return!1}},{key:"toDate",value:function(e){return new Date(e)}},{key:"toRegexp",value:function(e){var t=e.indexOf("/"),r=e.lastIndexOf("/");return new RegExp(e.slice(t+1,r),e.slice(r+1))}}]);return r}(n.BaseDecoder);function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}var g,j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"name",void 0);this.name=t}!function(e,t,r){t&&b(e.prototype,t)}(e,[{key:"inspect",value:function(){return{collection:this.name}}}]);return e}();!function(e){e.READ=".read";e.WRITE=".write";e.CREATE="document.create";e.UPDATE="document.update";e.DELETE="document.delete";e.AGGREGATE=".aggregate"}(g||(g={}));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&function(e,t){(Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function R(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var B=function(){function e(t){T(this,e);R(this,"name",void 0);R(this,"_schema",{});R(this,"_argMap",{});R(this,"_permission",void 0);this._argMap=t;this._argMap.options||(this._argMap.options={})}!function(e,t,r){t&&A(e.prototype,t)}(e,[{key:"permission",get:function(){switch(this._permission){case g.CREATE:case g.UPDATE:case g.DELETE:return g.WRITE;default:return this._permission}}},{key:"argMap",get:function(){return this._argMap}},{key:"schema",get:function(){return this._schema}},{key:"augmentOptions",value:function(e){this.argMap.options=Object.assign({},this.argMap.options,e)}},{key:"inspect",value:function(){return E(E({},function e(t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];h(t[o])&&(0===Object.keys(t[o]).length?"{}"!==JSON.stringify(t[o])&&delete t[o]:e(t[o]));void 0===t[o]&&delete t[o]}return t}(JSON.parse(JSON.stringify(this.argMap)))),{},{command:this.name})}}]);return e}(),D=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","aggregate");R(S(e),"_schema",{pipeline:"array",options:{type:"object",required:!1,rule:{explain:{type:"boolean",required:!1},allowDiskUse:{type:"boolean",required:!1},maxTimeMS:{type:"int",required:!1,min:0},bypassDocumentValidation:{type:"boolean",required:!1},raw:{type:"boolean",required:!1},promoteLongs:{type:"boolean",required:!1},promoteValues:{type:"boolean",required:!1},promoteBuffers:{type:"boolean",required:!1},collation:{type:"object",required:!1}}}});R(S(e),"_permission",g.AGGREGATE);return e}return r}(B),I=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","count");R(S(e),"_schema",{query:"object",options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0}}}});R(S(e),"_permission",g.READ);return e}return r}(B),C=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","distinct");R(S(e),"_schema",{key:"string",query:"object",options:{type:"object",required:!1}});R(S(e),"_permission",g.READ);return e}return r}(B),q=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","findOne");R(S(e),"_schema",{query:{type:"object",required:!1},options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0},sort:{type:"sort",required:!1},projection:{type:"projection",required:!1},hint:{type:"object",required:!1}}}});R(S(e),"_permission",g.READ);return e}return r}(B),z=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","find");R(S(e),"_schema",{query:{type:"object",required:!1},options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0},sort:{type:"sort",required:!1},projection:{type:"projection",required:!1},hint:{type:"object",required:!1}}}});R(S(e),"_permission",g.READ);return e}return r}(B),M=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","insertOne");R(S(e),"_schema",{doc:"field",options:{type:"object",required:!1}});R(S(e),"_permission",g.CREATE);return e}return r}(B),H=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","insertMany");R(S(e),"_schema",{docs:"fields",options:{type:"object",required:!1}});R(S(e),"_permission",g.CREATE);return e}return r}(B),L=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","findOneAndUpdate");R(S(e),"_schema",{filter:"object",update:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},upsert:{type:"boolean",required:!1},projection:{type:"projection",required:!1},returnNewDocument:{type:"boolean",required:!1}}}});R(S(e),"_permission",g.UPDATE);return e}return r}(B),N=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","updateOne");R(S(e),"_schema",{filter:"object",update:"nobject",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});R(S(e),"_permission",g.UPDATE);return e}return r}(B),F=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","updateMany");R(S(e),"_schema",{filter:"object",update:"nobject",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});R(S(e),"_permission",g.UPDATE);return e}return r}(B),U=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","findOneAndReplace");R(S(e),"_schema",{filter:"object",replacement:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},upsert:{type:"boolean",required:!1},projection:{type:"projection",required:!1}}}});R(S(e),"_permission",g.UPDATE);return e}return r}(B),G=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","replaceOne");R(S(e),"_schema",{filter:"object",doc:"object",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});R(S(e),"_permission",g.UPDATE);return e}return r}(B),Y=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","findOneAndDelete");R(S(e),"_schema",{filter:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},projection:{type:"object",required:!1}}}});R(S(e),"_permission",g.DELETE);return e}return r}(B),K=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","deleteOne");R(S(e),"_schema",{filter:{type:"object"},options:{type:"object",required:!1}});R(S(e),"_permission",g.DELETE);return e}return r}(B),W=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","deleteMany");R(S(e),"_schema",{filter:{type:"object"},options:{type:"object",required:!1}});R(S(e),"_permission",g.DELETE);return e}return r}(B),V=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","startTransaction");return e}return r}(B),J=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","commitTransaction");return e}return r}(B),$=function(e){w(r,e);var t=x(r);function r(){var e;T(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];R(S(e=t.call.apply(t,[this].concat(o))),"name","abortTransaction");return e}return r}(B);function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function Z(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var Q,ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);Z(this,"raw",void 0);Z(this,"encoder",new m);Z(this,"decoder",new v);this.raw=this.decoder.decode(t)}!function(e,t,r){t&&X(e.prototype,t)}(e,[{key:"inspect",value:function(){return this.raw}}]);return e}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.INVALID_TYPE="field type is invalid";e.NOT_ARRAY="field is not an array";e.ILLEGAL="field should not contain illegal character";e.ILLEGAL_VALUE="field should not contain undefined for a value";e.EMPTY_OBJECT="field should not be an empty object";e.NOT_OBJECT="should be an object";e.EMPTY="should not empty"}(Q||(Q={}));function re(e,t,r){function n(e){if(/[\.\$]/.test(e))return Q.ILLEGAL}if(!(t instanceof Object))return Q.INVALID_TYPE;if(Array.isArray(t))return Q.INVALID_TYPE;for(var o=0,i=Object.keys(t);o<i.length;o++){var c=i[o],s=n(c);if("string"==typeof s)return s;if(t[c]instanceof Object&&!Array.isArray(t[c])){var a=re(e,t[c]);if(a)return a}}}var ne={ruleOfField:re,ruleOfFields:function(e,t){if(!Array.isArray(t))return Q.NOT_ARRAY;if(0===t.length)return Q.EMPTY;for(var r,n=0;!r&&n<t.length;){r=re(null,t[n],t[n]);n++}return r},ruleOfSort:function(e,t){var r=[1,-1];function n(e){if(/[\$]/.test(e))return Q.ILLEGAL}if(!(t instanceof Object))return Q.INVALID_TYPE;if("{}"!==JSON.stringify(t)){if(Array.isArray(t))return Q.INVALID_TYPE;for(var o=null,i=0,c=Object.keys(t);i<c.length;i++){var s=c[i];if("string"==typeof(o=n(s)))return o;if(!r.includes(t[s]))return Q.INVALID_TYPE}return null===o?Q.INVALID_TYPE:void 0}},ruleOfProjection:function(e,t){var r=[1,0];function n(e){if(/[\$]/.test(e))return Q.ILLEGAL}if(!(t instanceof Object))return Q.INVALID_TYPE;if("{}"!==JSON.stringify(t)){if(Array.isArray(t))return Q.INVALID_TYPE;for(var o=null,i=0,c=Object.keys(t);i<c.length;i++){var s=c[i];if("string"==typeof(o=n(s)))return o;if(!r.includes(t[s]))return Q.INVALID_TYPE}return null===o?Q.INVALID_TYPE:void 0}},ruleOfNobject:function(e,t){return"object"!==te(t)?Q.NOT_OBJECT:0===Object.keys(t).length?Q.EMPTY_OBJECT:void 0}};function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function ce(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae,ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&ie(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var o=se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ce(this,r)}}(r);function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);n=t.call(this,e);for(var o=0,i=Object.keys(ne);o<i.length;o++){var c=i[o],s=c.match(/ruleOf([a-zA-Z]+)/)[1];n.p.addRule(s[0].toLowerCase()+s.slice(1),ne[c])}return n}return r}(n.Validator),le=Object(n.MPServerlessErrorClass)({TransactionError:{code:"TransactionError",message:"事务失败错误"}});function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t,r){return(pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function be(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){ve(i,n,o,c,s,"next",e)}function s(e){ve(i,n,o,c,s,"throw",e)}c(void 0)}))}}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function _e(e,t,r){t&&je(e.prototype,t);r&&je(e,r);return e}function we(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}!function(e){e.AGGREGATE="aggregate";e.COUNT="count";e.DISTINCT="distinct";e.FIND_ONE="findone";e.FIND="find";e.INSERT_ONE="insertOne";e.INSERT_MANY="insertMany";e.FIND_ONE_AND_UPDATE="findOneAndUpdate";e.UPDATE_ONE="updateOne";e.UPDATE_MANY="updateMany";e.FIND_ONE_AND_REPLACE="findOneAndReplace";e.REPLACE_ONE="replaceOne";e.FIND_ONE_AND_DELETE="findOneAndDelete";e.DELETE_ONE="deleteOne";e.DELETE_MANY="deleteMany"}(ae||(ae={}));var xe,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&de(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var o=me(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return he(this,r)}}(r);function r(){var e;ge(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];we(ye(e=t.call.apply(t,[this].concat(o))),"getEncoder",void 0);we(ye(e),"getTransport",void 0);return e}_e(r,[{key:"execute",value:function(){var e=be(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return pe(me(r.prototype),"execute",this).call(this);case 2:t=e.sent;n=this.getEncoder().setBodyField({method:"serverless.db.default.execute",params:t});e.next=6;return this.getTransport().request(n);case 6:o=e.sent;return e.abrupt("return",new ee(o.body).inspect());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]);return r}(function(){function e(){ge(this,e);we(this,"transId",void 0);we(this,"coll",void 0);we(this,"comm",void 0);we(this,"encoder",new m);we(this,"decoder",new v)}_e(e,[{key:"transaction",value:function(){var e=be(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.comm=new V({});e.next=3;return this.execute();case 3:(t=e.sent)&&(this.transId=t.transactionId);return e.abrupt("return",this.transId);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"commit",value:function(){var e=be(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.comm=new J({});return e.abrupt("return",this.execute());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rollback",value:function(){var e=be(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.comm=new $({});return e.abrupt("return",this.execute());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"collection",value:function(e){this.coll=new j(e);return this}},{key:"aggregate",value:function(e,t){this.validateTransactionAction(ae.AGGREGATE);this.comm=new D({pipeline:e,options:t});return this.execute()}},{key:"count",value:function(e,t){this.validateTransactionAction(ae.COUNT);this.comm=new I({query:e,options:t});return this.execute()}},{key:"distinct",value:function(e,t,r){this.validateTransactionAction(ae.DISTINCT);this.comm=new C({key:e,query:t,options:r});return this.execute()}},{key:"findOne",value:function(e,t){this.comm=new q({query:e,options:t});return this.execute()}},{key:"find",value:function(e,t){this.validateTransactionAction(ae.FIND);this.comm=new z({query:e,options:t});return this.execute()}},{key:"insertOne",value:function(e,t){this.comm=new M({doc:e,options:t});return this.execute()}},{key:"insertMany",value:function(e,t){this.validateTransactionAction(ae.INSERT_MANY);this.comm=new H({docs:e,options:t});return this.execute()}},{key:"findOneAndUpdate",value:function(e,t,r){this.comm=new L({filter:e,update:t,options:r});return this.execute()}},{key:"updateOne",value:function(e,t,r){this.comm=new N({filter:e,update:t,options:r});return this.execute()}},{key:"updateMany",value:function(e,t,r){this.validateTransactionAction(ae.UPDATE_MANY);this.comm=new F({filter:e,update:t,options:r});return this.execute()}},{key:"findOneAndReplace",value:function(e,t,r){this.comm=new U({filter:e,replacement:t,options:r});return this.execute()}},{key:"replaceOne",value:function(e,t,r){this.comm=new G({filter:e,doc:t,options:r});return this.execute()}},{key:"findOneAndDelete",value:function(e,t){this.comm=new Y({filter:e,options:t});return this.execute()}},{key:"deleteOne",value:function(e,t){this.comm=new K({filter:e,options:t});return this.execute()}},{key:"deleteMany",value:function(e,t){this.validateTransactionAction(ae.DELETE_MANY);this.comm=new W({filter:e,options:t});return this.execute()}},{key:"validate",value:function(){var e=new ue;try{e.validate(this.comm.schema,this.encoder.encode(this.comm.argMap))}catch(e){throw e}}},{key:"execute",value:function(){var e=be(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(n.assert)(this.comm,"[DBService]缺少 command 参数");this.validate();e.t0=this.comm.permission;e.next=e.t0===g.AGGREGATE||e.t0===g.WRITE||e.t0===g.READ?5:7;break;case 5:Object(n.assert)(this.collection,"[DBService]缺少 collection 参数");return e.abrupt("break",7);case 7:t=Object.assign({},this.coll&&this.coll.inspect(),this.transId&&{transactionId:this.transId},this.comm.inspect());return e.abrupt("return",this.encoder.encode(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateTransactionAction",value:function(e){if(this.transId)throw new le.TransactionError("transaction not support action ["+e+"]")}}]);return e}());function Se(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function ke(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){Se(i,n,o,c,s,"next",e)}function s(e){Se(i,n,o,c,s,"throw",e)}c(void 0)}))}}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function Ee(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}!function(e){e.INIT="init";e.COMMIT="commit";e.ROLLBACK="rollback"}(xe||(xe={}));var Te=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);Ee(this,"id",void 0);Ee(this,"status",void 0);Ee(this,"httpTransport",void 0);Ee(this,"httpRequestEncoder",void 0);Ee(this,"queryService",void 0);this.status=xe.INIT;this.httpTransport=t;this.httpRequestEncoder=r;this.queryService=new Oe;this.queryService.getEncoder=function(){return n.httpRequestEncoder};this.queryService.getTransport=function(){return n.httpTransport}}!function(e,t,r){t&&Pe(e.prototype,t)}(e,[{key:"init",value:function(){var e=ke(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return this.queryService.transaction();case 2:this.id=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"collection",value:function(e){this.queryService&&this.queryService.collection(e);return this.queryService}},{key:"commit",value:function(){var e=ke(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkStatus();this.status=xe.COMMIT;return e.abrupt("return",this.queryService.commit());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rollback",value:function(){var e=ke(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkStatus();this.status=xe.ROLLBACK;return e.abrupt("return",this.queryService.rollback());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkStatus",value:function(){if(this.status===xe.COMMIT||this.status===xe.ROLLBACK)throw new le.TransactionError("transaction already "+this.status)}}]);return e}();function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function Ce(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Ie(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=qe(e);if(t){var o=qe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ce(this,r)}}(r);function r(){Be(this,r);return t.apply(this,arguments)}!function(e,t,r){t&&De(e.prototype,t)}(r,[{key:"collection",value:function(e){var t=this,r=(new Oe).collection(e);r.getEncoder=function(){return t.getEncoder()};r.getTransport=function(){return t.transport};return r}},{key:"startTransaction",value:function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){Re(i,n,o,c,s,"next",e)}function s(e){Re(i,n,o,c,s,"throw",e)}c(void 0)}))}}(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Te(this.transport,this.getEncoder());e.next=3;return t.init();case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]);return r}(n.BaseService)},"@alicloud/mpserverless-core":function(t,r){t.exports=e}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-file-service/dist/index.js":function(e,t,r){e.exports=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"../../node_modules/crypto-js/aes.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.BlockCipher,n=t.algo,o=[],i=[],c=[],s=[],a=[],u=[],l=[],f=[],p=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99;o[r]=h;i[h]=r;var y=e[r],m=e[y],v=e[m],b=257*e[h]^16843008*h;c[r]=b<<24|b>>>8;s[r]=b<<16|b>>>16;a[r]=b<<8|b>>>24;u[r]=b;b=16843009*v^65537*m^257*y^16843008*r;l[h]=b<<24|b>>>8;f[h]=b<<16|b>>>16;p[h]=b<<8|b>>>24;d[h]=b;if(r){r=y^e[e[e[v^y]]];n^=e[e[n]]}else r=n=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],c=0;c<n;c++)if(c<r)i[c]=t[c];else{var s=i[c-1];if(c%r)r>6&&c%r==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]);else{s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s];s^=h[c/r|0]<<24}i[c]=i[c-r]^s}for(var a=this._invKeySchedule=[],u=0;u<n;u++){c=n-u;s=u%4?i[c]:i[c-4];a[u]=u<4||c<=4?s:l[o[s>>>24]]^f[o[s>>>16&255]]^p[o[s>>>8&255]]^d[o[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,c,s,a,u,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3];e[t+3]=r;this._doCryptBlock(e,t,this._invKeySchedule,l,f,p,d,i);r=e[t+1];e[t+1]=e[t+3];e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,i,c,s){for(var a=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],f=e[t+2]^r[2],p=e[t+3]^r[3],d=4,h=1;h<a;h++){var y=n[u>>>24]^o[l>>>16&255]^i[f>>>8&255]^c[255&p]^r[d++],m=n[l>>>24]^o[f>>>16&255]^i[p>>>8&255]^c[255&u]^r[d++],v=n[f>>>24]^o[p>>>16&255]^i[u>>>8&255]^c[255&l]^r[d++],b=n[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^c[255&f]^r[d++];u=y;l=m;f=v;p=b}y=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^r[d++],m=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^r[d++],v=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^r[d++],b=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^r[d++];e[t]=y;e[t+1]=m;e[t+2]=v;e[t+3]=b},keySize:8});t.AES=r._createHelper(y)}();return e.AES}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/cipher-core.js":function(e,t,r){e.exports=function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,o=n.Base,i=n.WordArray,c=n.BufferedBlockAlgorithm,s=r.enc,a=(s.Utf8,s.Base64),u=r.algo.EvpKDF,l=n.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r);this._xformMode=e;this._key=t;this.reset()},reset:function(){c.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?g:v}return function(t){return{encrypt:function(r,n,o){return e(n).encrypt(t,r,n,o)},decrypt:function(r,n,o){return e(n).decrypt(t,r,n,o)}}}}()}),f=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),p=n.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e;this._iv=t}}),d=f.CBC=function(){var e=p.extend();e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize;t.call(this,e,r,o);n.encryptBlock(e,r);this._prevBlock=e.slice(r,r+o)}});e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,i=e.slice(r,r+o);n.decryptBlock(e,r);t.call(this,e,r,o);this._prevBlock=i}});function t(e,t,r){var n=this._iv;if(n){var o=n;this._iv=void 0}else o=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=o[i]}return e}(),h=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,o=n<<24|n<<16|n<<8|n,c=[],s=0;s<n;s+=4)c.push(o);var a=i.create(c,n);e.concat(a)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},y=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:h}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{n=r.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==n)this._mode.init(this,t&&t.words);else{this._mode=n.call(r,this,t&&t.words);this._mode.__creator=n}},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=i.create([1398893684,1701076831]).concat(r).concat(t);else n=t;return n.toString(a)},parse:function(e){var t=a.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=i.create(r.slice(2,4));r.splice(0,4);t.sigBytes-=16}return y.create({ciphertext:t,salt:n})}},v=n.SerializableCipher=o.extend({cfg:o.extend({format:m}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var o=e.createEncryptor(r,n),i=o.finalize(t),c=o.cfg;return y.create({ciphertext:i,key:r,iv:c.iv,algorithm:e,mode:c.mode,padding:c.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){n=this.cfg.extend(n);t=this._parse(t,n.format);return e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(r.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=i.random(8));var o=u.create({keySize:t+r}).compute(e,n),c=i.create(o.words.slice(t),4*r);o.sigBytes=4*t;return y.create({key:o,iv:c,salt:n})}},g=n.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var o=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=o.iv;var i=v.encrypt.call(this,e,t,o.key,n);i.mixIn(o);return i},decrypt:function(e,t,r,n){n=this.cfg.extend(n);t=this._parse(t,n.format);var o=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);n.iv=o.iv;return v.decrypt.call(this,e,t,o.key,n)}})}()}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/evpkdf.js"))},"../../node_modules/crypto-js/core.js":function(e,t,r){e.exports=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;e.prototype=t;r=new e;e.prototype=null;return r}}(),n={},o=n.lib={},i=o.Base={extend:function(e){var t=r(this);e&&t.mixIn(e);t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)});t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[];this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;this.clamp();if(n%4)for(var i=0;i<o;i++){var c=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=c<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)t[n+i>>>2]=r[i>>>2];this.sigBytes+=o;return this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8;t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){for(var r,n=[],o=function(t){t=t;var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;o/=4294967296;return(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(r||e.random()));r=987654071*s();n.push(4294967296*s()|0)}return new c.init(n,t)}}),s=n.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16));n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new c.init;this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e));this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,s=o/(4*i),a=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,u=e.min(4*a,o);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(n,l);var f=n.splice(0,a);r.sigBytes-=u}return new c.init(f,u)},clone:function(){var e=i.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0}),p=(o.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){f.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math);return e}()},"../../node_modules/crypto-js/enc-base64.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var c=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)o.push(n.charAt(c>>>6*(3-s)&63));var a=n.charAt(64);if(a)for(;o.length%4;)o.push(a);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var c=n.charAt(64);if(c){var s=e.indexOf(c);-1!==s&&(t=s)}return function(e,t,n){for(var o=[],i=0,c=0;c<t;c++)if(c%4){var s=n[e.charCodeAt(c-1)]<<c%4*2,a=n[e.charCodeAt(c)]>>>6-c%4*2;o[i>>>2]|=(s|a)<<24-i%4*8;i++}return r.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();return e.enc.Base64}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/enc-utf16.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.WordArray,n=t.enc;n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return r.create(n,2*t)}};n.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var c=o(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(c))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return r.create(n,2*t)}};function o(e){return e<<8&4278255360|e>>>8&16711935}}();return e.enc.Utf16}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/evpkdf.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib,n=r.Base,o=r.WordArray,i=t.algo,c=i.MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),i=o.create(),c=i.words,s=r.keySize,a=r.iterations;c.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var l=1;l<a;l++){u=n.finalize(u);n.reset()}i.concat(u)}i.sigBytes=4*s;return i}});t.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}();return e.EvpKDF}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/hmac.js"))},"../../node_modules/crypto-js/format-hex.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib.CipherParams,o=r.enc.Hex;r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return n.create({ciphertext:t})}}}();return e.format.Hex}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/hmac.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init;"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t));t.clamp();for(var i=this._oKey=t.clone(),c=this._iKey=t.clone(),s=i.words,a=c.words,u=0;u<r;u++){s[u]^=1549556828;a[u]^=909522486}i.sigBytes=c.sigBytes=o;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}})}()}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/index.js":function(e,t,r){e.exports=function(e){return e}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"),r("../../node_modules/crypto-js/lib-typedarrays.js"),r("../../node_modules/crypto-js/enc-utf16.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/sha256.js"),r("../../node_modules/crypto-js/sha224.js"),r("../../node_modules/crypto-js/sha512.js"),r("../../node_modules/crypto-js/sha384.js"),r("../../node_modules/crypto-js/sha3.js"),r("../../node_modules/crypto-js/ripemd160.js"),r("../../node_modules/crypto-js/hmac.js"),r("../../node_modules/crypto-js/pbkdf2.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"),r("../../node_modules/crypto-js/mode-cfb.js"),r("../../node_modules/crypto-js/mode-ctr.js"),r("../../node_modules/crypto-js/mode-ctr-gladman.js"),r("../../node_modules/crypto-js/mode-ofb.js"),r("../../node_modules/crypto-js/mode-ecb.js"),r("../../node_modules/crypto-js/pad-ansix923.js"),r("../../node_modules/crypto-js/pad-iso10126.js"),r("../../node_modules/crypto-js/pad-iso97971.js"),r("../../node_modules/crypto-js/pad-zeropadding.js"),r("../../node_modules/crypto-js/pad-nopadding.js"),r("../../node_modules/crypto-js/format-hex.js"),r("../../node_modules/crypto-js/aes.js"),r("../../node_modules/crypto-js/tripledes.js"),r("../../node_modules/crypto-js/rc4.js"),r("../../node_modules/crypto-js/rabbit.js"),r("../../node_modules/crypto-js/rabbit-legacy.js"))},"../../node_modules/crypto-js/lib-typedarrays.js":function(e,t,r){e.exports=function(e){!function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init;(t.init=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength));if(e instanceof Uint8Array){for(var t=e.byteLength,n=[],o=0;o<t;o++)n[o>>>2]|=e[o]<<24-o%4*8;r.call(this,n,t)}else r.apply(this,arguments)}).prototype=t}}();return e.lib.WordArray}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/md5.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.WordArray,i=n.Hasher,c=r.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=c.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,c=e[t+0],a=e[t+1],d=e[t+2],h=e[t+3],y=e[t+4],m=e[t+5],v=e[t+6],b=e[t+7],g=e[t+8],j=e[t+9],_=e[t+10],w=e[t+11],x=e[t+12],O=e[t+13],S=e[t+14],k=e[t+15],P=i[0],E=i[1],T=i[2],A=i[3];P=u(P,E,T,A,c,7,s[0]);A=u(A,P,E,T,a,12,s[1]);T=u(T,A,P,E,d,17,s[2]);E=u(E,T,A,P,h,22,s[3]);P=u(P,E,T,A,y,7,s[4]);A=u(A,P,E,T,m,12,s[5]);T=u(T,A,P,E,v,17,s[6]);E=u(E,T,A,P,b,22,s[7]);P=u(P,E,T,A,g,7,s[8]);A=u(A,P,E,T,j,12,s[9]);T=u(T,A,P,E,_,17,s[10]);E=u(E,T,A,P,w,22,s[11]);P=u(P,E,T,A,x,7,s[12]);A=u(A,P,E,T,O,12,s[13]);T=u(T,A,P,E,S,17,s[14]);P=l(P,E=u(E,T,A,P,k,22,s[15]),T,A,a,5,s[16]);A=l(A,P,E,T,v,9,s[17]);T=l(T,A,P,E,w,14,s[18]);E=l(E,T,A,P,c,20,s[19]);P=l(P,E,T,A,m,5,s[20]);A=l(A,P,E,T,_,9,s[21]);T=l(T,A,P,E,k,14,s[22]);E=l(E,T,A,P,y,20,s[23]);P=l(P,E,T,A,j,5,s[24]);A=l(A,P,E,T,S,9,s[25]);T=l(T,A,P,E,h,14,s[26]);E=l(E,T,A,P,g,20,s[27]);P=l(P,E,T,A,O,5,s[28]);A=l(A,P,E,T,d,9,s[29]);T=l(T,A,P,E,b,14,s[30]);P=f(P,E=l(E,T,A,P,x,20,s[31]),T,A,m,4,s[32]);A=f(A,P,E,T,g,11,s[33]);T=f(T,A,P,E,w,16,s[34]);E=f(E,T,A,P,S,23,s[35]);P=f(P,E,T,A,a,4,s[36]);A=f(A,P,E,T,y,11,s[37]);T=f(T,A,P,E,b,16,s[38]);E=f(E,T,A,P,_,23,s[39]);P=f(P,E,T,A,O,4,s[40]);A=f(A,P,E,T,c,11,s[41]);T=f(T,A,P,E,h,16,s[42]);E=f(E,T,A,P,v,23,s[43]);P=f(P,E,T,A,j,4,s[44]);A=f(A,P,E,T,x,11,s[45]);T=f(T,A,P,E,k,16,s[46]);P=p(P,E=f(E,T,A,P,d,23,s[47]),T,A,c,6,s[48]);A=p(A,P,E,T,b,10,s[49]);T=p(T,A,P,E,S,15,s[50]);E=p(E,T,A,P,m,21,s[51]);P=p(P,E,T,A,x,6,s[52]);A=p(A,P,E,T,h,10,s[53]);T=p(T,A,P,E,_,15,s[54]);E=p(E,T,A,P,a,21,s[55]);P=p(P,E,T,A,g,6,s[56]);A=p(A,P,E,T,k,10,s[57]);T=p(T,A,P,E,v,15,s[58]);E=p(E,T,A,P,O,21,s[59]);P=p(P,E,T,A,y,6,s[60]);A=p(A,P,E,T,w,10,s[61]);T=p(T,A,P,E,d,15,s[62]);E=p(E,T,A,P,j,21,s[63]);i[0]=i[0]+P|0;i[1]=i[1]+E|0;i[2]=i[2]+T|0;i[3]=i[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;r[o>>>5]|=128<<24-o%32;var i=t.floor(n/4294967296),c=n;r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);r[14+(o+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);e.sigBytes=4*(r.length+1);this._process();for(var s=this._hash,a=s.words,u=0;u<4;u++){var l=a[u];a[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});function u(e,t,r,n,o,i,c){var s=e+(t&r|~t&n)+o+c;return(s<<i|s>>>32-i)+t}function l(e,t,r,n,o,i,c){var s=e+(t&n|r&~n)+o+c;return(s<<i|s>>>32-i)+t}function f(e,t,r,n,o,i,c){var s=e+(t^r^n)+o+c;return(s<<i|s>>>32-i)+t}function p(e,t,r,n,o,i,c){var s=e+(r^(t|~n))+o+c;return(s<<i|s>>>32-i)+t}r.MD5=i._createHelper(a);r.HmacMD5=i._createHmacHelper(a)}(Math);return e.MD5}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/mode-cfb.js":function(e,t,r){e.exports=function(e){e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize;r.call(this,e,t,o,n);this._prevBlock=e.slice(t,t+o)}});t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=e.slice(t,t+o);r.call(this,e,t,o,n);this._prevBlock=i}});function r(e,t,r,n){var o=this._iv;if(o){var i=o.slice(0);this._iv=void 0}else i=this._prevBlock;n.encryptBlock(i,0);for(var c=0;c<r;c++)e[t+c]^=i[c]}return t}();return e.mode.CFB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ctr-gladman.js":function(e,t,r){e.exports=function(e){e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;if(255===t){t=0;if(255===r){r=0;255===n?n=0:++n}else++r}else++t;e=0;e+=t<<16;e+=r<<8;e+=n}else e+=1<<24;return e}var n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,c=this._counter;if(i){c=this._counter=i.slice(0);this._iv=void 0}!function(e){0===(e[0]=r(e[0]))&&(e[1]=r(e[1]))}(c);var s=c.slice(0);n.encryptBlock(s,0);for(var a=0;a<o;a++)e[t+a]^=s[a]}});t.Decryptor=n;return t}();return e.mode.CTRGladman}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ctr.js":function(e,t,r){e.exports=function(e){e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=this._iv,i=this._counter;if(o){i=this._counter=o.slice(0);this._iv=void 0}var c=i.slice(0);r.encryptBlock(c,0);i[n-1]=i[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=c[s]}});t.Decryptor=r;return t}();return e.mode.CTR}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ecb.js":function(e,t,r){e.exports=function(e){e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}});t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}});return t}();return e.mode.ECB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ofb.js":function(e,t,r){e.exports=function(e){e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=this._iv,i=this._keystream;if(o){i=this._keystream=o.slice(0);this._iv=void 0}r.encryptBlock(i,0);for(var c=0;c<n;c++)e[t+c]^=i[c]}});t.Decryptor=r;return t}();return e.mode.OFB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-ansix923.js":function(e,t,r){e.exports=function(e){e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,o=n-r%n,i=r+o-1;e.clamp();e.words[i>>>2]|=o<<24-i%4*8;e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};return e.pad.Ansix923}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-iso10126.js":function(e,t,r){e.exports=function(e){e.pad.Iso10126={pad:function(t,r){var n=4*r,o=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};return e.pad.Iso10126}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-iso97971.js":function(e,t,r){e.exports=function(e){e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1));e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t);t.sigBytes--}};return e.pad.Iso97971}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-nopadding.js":function(e,t,r){e.exports=function(e){e.pad.NoPadding={pad:function(){},unpad:function(){}};return e.pad.NoPadding}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-zeropadding.js":function(e,t,r){e.exports=function(e){e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp();e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}};return e.pad.ZeroPadding}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pbkdf2.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib,n=r.Base,o=r.WordArray,i=t.algo,c=i.SHA1,s=i.HMAC,a=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=s.create(r.hasher,e),i=o.create(),c=o.create([1]),a=i.words,u=c.words,l=r.keySize,f=r.iterations;a.length<l;){var p=n.update(t).finalize(c);n.reset();for(var d=p.words,h=d.length,y=p,m=1;m<f;m++){y=n.finalize(y);n.reset();for(var v=y.words,b=0;b<h;b++)d[b]^=v[b]}i.concat(p);u[0]++}i.sigBytes=4*l;return i}});t.PBKDF2=function(e,t,r){return a.create(r).compute(e,t)}}();return e.PBKDF2}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/hmac.js"))},"../../node_modules/crypto-js/rabbit-legacy.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.StreamCipher,n=t.algo,o=[],i=[],c=[],s=n.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)a.call(this);for(o=0;o<8;o++)n[o]^=r[o+4&7];if(t){var i=t.words,c=i[0],s=i[1],u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,p=l<<16|65535&u;n[0]^=u;n[1]^=f;n[2]^=l;n[3]^=p;n[4]^=u;n[5]^=f;n[6]^=l;n[7]^=p;for(o=0;o<4;o++)a.call(this)}},_doProcessBlock:function(e,t){var r=this._X;a.call(this);o[0]=r[0]^r[5]>>>16^r[3]<<16;o[1]=r[2]^r[7]>>>16^r[5]<<16;o[2]=r[4]^r[1]>>>16^r[7]<<16;o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++){o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8);e[t+n]^=o[n]}},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];t[0]=t[0]+1295307597+this._b|0;t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0;t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0;t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0;t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0;t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0;t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0;t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0;this._b=t[7]>>>0<i[7]>>>0?1:0;for(r=0;r<8;r++){var n=e[r]+t[r],o=65535&n,s=n>>>16,a=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&n)*n|0)+((65535&n)*n|0);c[r]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0;e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0;e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0;e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0;e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0;e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0;e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0;e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}t.RabbitLegacy=r._createHelper(s)}();return e.RabbitLegacy}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/rabbit.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.StreamCipher,n=t.algo,o=[],i=[],c=[],s=n.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(r=0;r<4;r++)a.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(t){var i=t.words,c=i[0],s=i[1],u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,p=l<<16|65535&u;o[0]^=u;o[1]^=f;o[2]^=l;o[3]^=p;o[4]^=u;o[5]^=f;o[6]^=l;o[7]^=p;for(r=0;r<4;r++)a.call(this)}},_doProcessBlock:function(e,t){var r=this._X;a.call(this);o[0]=r[0]^r[5]>>>16^r[3]<<16;o[1]=r[2]^r[7]>>>16^r[5]<<16;o[2]=r[4]^r[1]>>>16^r[7]<<16;o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++){o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8);e[t+n]^=o[n]}},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];t[0]=t[0]+1295307597+this._b|0;t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0;t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0;t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0;t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0;t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0;t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0;t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0;this._b=t[7]>>>0<i[7]>>>0?1:0;for(r=0;r<8;r++){var n=e[r]+t[r],o=65535&n,s=n>>>16,a=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&n)*n|0)+((65535&n)*n|0);c[r]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0;e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0;e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0;e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0;e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0;e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0;e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0;e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}t.Rabbit=r._createHelper(s)}();return e.Rabbit}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/rc4.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.StreamCipher,n=t.algo,o=n.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],o=0;o<256;o++)n[o]=o;o=0;for(var i=0;o<256;o++){var c=o%r,s=t[c>>>2]>>>24-c%4*8&255;i=(i+n[o]+s)%256;var a=n[o];n[o]=n[i];n[i]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,r=this._j,n=0,o=0;o<4;o++){r=(r+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[r];e[r]=i;n|=e[(e[t]+e[r])%256]<<24-8*o}this._i=t;this._j=r;return n}t.RC4=r._createHelper(o);var c=n.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=r._createHelper(c)}();return e.RC4}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/ripemd160.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.WordArray,i=n.Hasher,c=r.algo,s=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),d=c.RIPEMD160=i.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i,c,d,j,_,w,x,O,S,k,P,E=this._hash.words,T=f.words,A=p.words,R=s.words,B=a.words,D=u.words,I=l.words;w=i=E[0];x=c=E[1];O=d=E[2];S=j=E[3];k=_=E[4];for(r=0;r<80;r+=1){P=i+e[t+R[r]]|0;P+=r<16?h(c,d,j)+T[0]:r<32?y(c,d,j)+T[1]:r<48?m(c,d,j)+T[2]:r<64?v(c,d,j)+T[3]:b(c,d,j)+T[4];P=(P=g(P|=0,D[r]))+_|0;i=_;_=j;j=g(d,10);d=c;c=P;P=w+e[t+B[r]]|0;P+=r<16?b(x,O,S)+A[0]:r<32?v(x,O,S)+A[1]:r<48?m(x,O,S)+A[2]:r<64?y(x,O,S)+A[3]:h(x,O,S)+A[4];P=(P=g(P|=0,I[r]))+k|0;w=k;k=S;S=g(O,10);O=x;x=P}P=E[1]+d+S|0;E[1]=E[2]+j+k|0;E[2]=E[3]+_+w|0;E[3]=E[4]+i+x|0;E[4]=E[0]+c+O|0;E[0]=P},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);e.sigBytes=4*(t.length+1);this._process();for(var o=this._hash,i=o.words,c=0;c<5;c++){var s=i[c];i[c]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});function h(e,t,r){return e^t^r}function y(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function v(e,t,r){return e&r|t&~r}function b(e,t,r){return e^(t|~r)}function g(e,t){return e<<t|e>>>32-t}r.RIPEMD160=i._createHelper(d);r.HmacRIPEMD160=i._createHmacHelper(d)}(Math);return e.RIPEMD160}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha1.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib,n=r.WordArray,o=r.Hasher,i=t.algo,c=[],s=i.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],s=r[3],a=r[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var f=(n<<5|n>>>27)+a+c[u];f+=u<20?1518500249+(o&i|~o&s):u<40?1859775393+(o^i^s):u<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514;a=s;s=i;i=o<<30|o>>>2;o=n;n=f}r[0]=r[0]+n|0;r[1]=r[1]+o|0;r[2]=r[2]+i|0;r[3]=r[3]+s|0;r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296);t[15+(n+64>>>9<<4)]=r;e.sigBytes=4*t.length;this._process();return this._hash},clone:function(){var e=o.clone.call(this);e._hash=this._hash.clone();return e}});t.SHA1=o._createHelper(s);t.HmacSHA1=o._createHmacHelper(s)}();return e.SHA1}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha224.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.WordArray,n=t.algo,o=n.SHA256,i=n.SHA224=o.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);e.sigBytes-=4;return e}});t.SHA224=o._createHelper(i);t.HmacSHA224=o._createHmacHelper(i)}();return e.SHA224}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha256.js"))},"../../node_modules/crypto-js/sha256.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.WordArray,i=n.Hasher,c=r.algo,s=[],a=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;){if(e(n)){o<8&&(s[o]=r(t.pow(n,.5)));a[o]=r(t.pow(n,1/3));o++}n++}}();var u=[],l=c.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],c=r[3],s=r[4],l=r[5],f=r[6],p=r[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var h=u[d-15],y=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[d-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[d]=y+u[d-7]+v+u[d-16]}var b=n&o^n&i^o&i,g=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),j=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+a[d]+u[d];p=f;f=l;l=s;s=c+j|0;c=i;i=o;o=n;n=j+(g+b)|0}r[0]=r[0]+n|0;r[1]=r[1]+o|0;r[2]=r[2]+i|0;r[3]=r[3]+c|0;r[4]=r[4]+s|0;r[5]=r[5]+l|0;r[6]=r[6]+f|0;r[7]=r[7]+p|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;r[o>>>5]|=128<<24-o%32;r[14+(o+64>>>9<<4)]=t.floor(n/4294967296);r[15+(o+64>>>9<<4)]=n;e.sigBytes=4*r.length;this._process();return this._hash},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});r.SHA256=i._createHelper(l);r.HmacSHA256=i._createHmacHelper(l)}(Math);return e.SHA256}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha3.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.WordArray,i=n.Hasher,c=r.x64.Word,s=r.algo,a=[],u=[],l=[];!function(){for(var e=1,t=0,r=0;r<24;r++){a[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5;t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,i=0;i<24;i++){for(var s=0,f=0,p=0;p<7;p++){if(1&o){var d=(1<<p)-1;d<32?f^=1<<d:s^=1<<d-32}128&o?o=o<<1^113:o<<=1}l[i]=c.create(s,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=c.create()}();var p=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,o=0;o<n;o++){var i=e[t+2*o],c=e[t+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);(E=r[o]).high^=c;E.low^=i}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var d=0,h=0,y=0;y<5;y++){d^=(E=r[p+5*y]).high;h^=E.low}var m=f[p];m.high=d;m.low=h}for(p=0;p<5;p++){var v=f[(p+4)%5],b=f[(p+1)%5],g=b.high,j=b.low;for(d=v.high^(g<<1|j>>>31),h=v.low^(j<<1|g>>>31),y=0;y<5;y++){(E=r[p+5*y]).high^=d;E.low^=h}}for(var _=1;_<25;_++){var w=(E=r[_]).high,x=E.low,O=a[_];O<32?(d=w<<O|x>>>32-O,h=x<<O|w>>>32-O):(d=x<<O-32|w>>>64-O,h=w<<O-32|x>>>64-O);var S=f[u[_]];S.high=d;S.low=h}var k=f[0],P=r[0];k.high=P.high;k.low=P.low;for(p=0;p<5;p++)for(y=0;y<5;y++){var E=r[_=p+5*y],T=f[_],A=f[(p+1)%5+5*y],R=f[(p+2)%5+5*y];E.high=T.high^~A.high&R.high;E.low=T.low^~A.low&R.low}E=r[0];var B=l[s];E.high^=B.high;E.low^=B.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;r[n>>>5]|=1<<24-n%32;r[(t.ceil((n+1)/i)*i>>>5)-1]|=128;e.sigBytes=4*r.length;this._process();for(var c=this._state,s=this.cfg.outputLength/8,a=s/8,u=[],l=0;l<a;l++){var f=c[l],p=f.high,d=f.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8);d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8);u.push(d);u.push(p)}return new o.init(u,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=i._createHelper(p);r.HmacSHA3=i._createHmacHelper(p)}(Math);return e.SHA3}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"))},"../../node_modules/crypto-js/sha384.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.x64,n=r.Word,o=r.WordArray,i=t.algo,c=i.SHA512,s=i.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);e.sigBytes-=16;return e}});t.SHA384=c._createHelper(s);t.HmacSHA384=c._createHmacHelper(s)}();return e.SHA384}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"),r("../../node_modules/crypto-js/sha512.js"))},"../../node_modules/crypto-js/sha512.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib.Hasher,n=t.x64,o=n.Word,i=n.WordArray,c=t.algo;function s(){return o.create.apply(o,arguments)}var a=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=c.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],c=r[3],s=r[4],l=r[5],f=r[6],p=r[7],d=n.high,h=n.low,y=o.high,m=o.low,v=i.high,b=i.low,g=c.high,j=c.low,_=s.high,w=s.low,x=l.high,O=l.low,S=f.high,k=f.low,P=p.high,E=p.low,T=d,A=h,R=y,B=m,D=v,I=b,C=g,q=j,z=_,M=w,H=x,L=O,N=S,F=k,U=P,G=E,Y=0;Y<80;Y++){var K=u[Y];if(Y<16)var W=K.high=0|e[t+2*Y],V=K.low=0|e[t+2*Y+1];else{var J=u[Y-15],$=J.high,X=J.low,Z=($>>>1|X<<31)^($>>>8|X<<24)^$>>>7,Q=(X>>>1|$<<31)^(X>>>8|$<<24)^(X>>>7|$<<25),ee=u[Y-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,oe=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ie=u[Y-7],ce=ie.high,se=ie.low,ae=u[Y-16],ue=ae.high,le=ae.low;W=(W=(W=Z+ce+((V=Q+se)>>>0<Q>>>0?1:0))+ne+((V+=oe)>>>0<oe>>>0?1:0))+ue+((V+=le)>>>0<le>>>0?1:0);K.high=W;K.low=V}var fe,pe=z&H^~z&N,de=M&L^~M&F,he=T&R^T&D^R&D,ye=A&B^A&I^B&I,me=(T>>>28|A<<4)^(T<<30|A>>>2)^(T<<25|A>>>7),ve=(A>>>28|T<<4)^(A<<30|T>>>2)^(A<<25|T>>>7),be=(z>>>14|M<<18)^(z>>>18|M<<14)^(z<<23|M>>>9),ge=(M>>>14|z<<18)^(M>>>18|z<<14)^(M<<23|z>>>9),je=a[Y],_e=je.high,we=je.low,xe=U+be+((fe=G+ge)>>>0<G>>>0?1:0),Oe=ve+ye;U=N;G=F;N=H;F=L;H=z;L=M;z=C+(xe=(xe=(xe=xe+pe+((fe+=de)>>>0<de>>>0?1:0))+_e+((fe+=we)>>>0<we>>>0?1:0))+W+((fe+=V)>>>0<V>>>0?1:0))+((M=q+fe|0)>>>0<q>>>0?1:0)|0;C=D;q=I;D=R;I=B;R=T;B=A;T=xe+(me+he+(Oe>>>0<ve>>>0?1:0))+((A=fe+Oe|0)>>>0<fe>>>0?1:0)|0}h=n.low=h+A;n.high=d+T+(h>>>0<A>>>0?1:0);m=o.low=m+B;o.high=y+R+(m>>>0<B>>>0?1:0);b=i.low=b+I;i.high=v+D+(b>>>0<I>>>0?1:0);j=c.low=j+q;c.high=g+C+(j>>>0<q>>>0?1:0);w=s.low=w+M;s.high=_+z+(w>>>0<M>>>0?1:0);O=l.low=O+L;l.high=x+H+(O>>>0<L>>>0?1:0);k=f.low=k+F;f.high=S+N+(k>>>0<F>>>0?1:0);E=p.low=E+G;p.high=P+U+(E>>>0<G>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296);t[31+(n+128>>>10<<5)]=r;e.sigBytes=4*t.length;this._process();return this._hash.toX32()},clone:function(){var e=r.clone.call(this);e._hash=this._hash.clone();return e},blockSize:32});t.SHA512=r._createHelper(l);t.HmacSHA512=r._createHmacHelper(l)}();return e.SHA512}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"))},"../../node_modules/crypto-js/tripledes.js":function(e,t,r){e.exports=function(e){!function(){var t=e,r=t.lib,n=r.WordArray,o=r.BlockCipher,i=t.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=c[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){var u=o[i]=[],l=a[i];for(r=0;r<24;r++){u[r/6|0]|=t[(s[r]-1+l)%28]<<31-r%6;u[4+(r/6|0)]|=t[28+(s[r+24]-1+l)%28]<<31-r%6}u[0]=u[0]<<1|u[0]>>>31;for(r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var f=this._invSubKeys=[];for(r=0;r<16;r++)f[r]=o[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t];this._rBlock=e[t+1];p.call(this,4,252645135);p.call(this,16,65535);d.call(this,2,858993459);d.call(this,8,16711935);p.call(this,1,1431655765);for(var n=0;n<16;n++){for(var o=r[n],i=this._lBlock,c=this._rBlock,s=0,a=0;a<8;a++)s|=u[a][((c^o[a])&l[a])>>>0];this._lBlock=c;this._rBlock=i^s}var f=this._lBlock;this._lBlock=this._rBlock;this._rBlock=f;p.call(this,1,1431655765);d.call(this,8,16711935);d.call(this,2,858993459);p.call(this,16,65535);p.call(this,4,252645135);e[t]=this._lBlock;e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r;this._lBlock^=r<<e}function d(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r;this._rBlock^=r<<e}t.DES=o._createHelper(f);var h=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(n.create(e.slice(0,2)));this._des2=f.createEncryptor(n.create(e.slice(2,4)));this._des3=f.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t);this._des2.decryptBlock(e,t);this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t);this._des2.encryptBlock(e,t);this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=o._createHelper(h)}();return e.TripleDES}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/x64-core.js":function(e,t,r){e.exports=function(e){!function(t){var r=e,n=r.lib,o=n.Base,i=n.WordArray,c=r.x64={};c.Word=o.extend({init:function(e,t){this.high=e;this.low=t}}),c.WordArray=o.extend({init:function(e,t){e=this.words=e||[];this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var o=e[n];r.push(o.high);r.push(o.low)}return i.create(r,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}();return e}(r("../../node_modules/crypto-js/core.js"))},"./node_modules/mime/Mime.js":function(e,t,r){"use strict";function n(){this._types=Object.create(null);this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this);this.getType=this.getType.bind(this);this.getExtension=this.getExtension.bind(this)}n.prototype.define=function(e,t){for(let r in e){let n=e[r].map((function(e){return e.toLowerCase()}));r=r.toLowerCase();for(let e=0;e<n.length;e++){const o=n[e];if("*"!==o[0]){if(!t&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(t||!this._extensions[r]){const e=n[0];this._extensions[r]="*"!==e[0]?e:e.substr(1)}}};n.prototype.getType=function(e){let t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),r=t.replace(/^.*\./,"").toLowerCase(),n=t.length<e.length;return(r.length<t.length-1||!n)&&this._types[r]||null};n.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null};e.exports=n},"./node_modules/mime/lite.js":function(e,t,r){"use strict";let n=r("./node_modules/mime/Mime.js");e.exports=new n(r("./node_modules/mime/types/standard.js"))},"./node_modules/mime/types/standard.js":function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"OSSUploadResponseFormat",(function(){return A}));r.d(t,"OSSUploadHeaderList",(function(){return B}));r.d(t,"WHITELIST_EXTENSIONS",(function(){return D}));r.d(t,"MPFileService",(function(){return I}));var n,o=r("@alicloud/mpserverless-core");!function(e){e.INVALID_FILEID="fileId type error, required string or string array";e.EMPTY_ARRAY="need at least one member in fileId array"}(n||(n={}));var i={ruleOfFileId:function(e,t){if("string"!=typeof t&&!Array.isArray(t))return n.INVALID_FILEID;if(Array.isArray(t)){if(0===t.length)return n.EMPTY_ARRAY;if(!t.every((function(e){return"string"==typeof e})))return n.INVALID_FILEID}}},c={options:{type:"object",rule:{fileSize:{type:"int",required:!1,min:0},extension:{type:"enum",required:!1,values:[".jpg",".jpeg",".png",".gif",".image","jpg","jpeg","png","gif","image",".pdf",".xls",".xlsx",".doc",".docx",".ppt",".pptx",".txt",".audio",".au",".mp2",".mp3",".3gpp",".mp4",".mpeg",".flv",".avi",".wmv",".mpg",".mpga"]},filePath:{type:"string"},env:{type:"enum",required:!1,values:["public"]},timeout:{type:"int",required:!1,min:0},headers:{type:"object",required:!1,rules:{cacheControl:{type:"string",required:!1},contentDisposition:{type:"string",required:!1},contentEncoding:{type:"string",required:!1},expires:{type:"string",required:!1}}},meta:{type:"object",required:!1},cloudPath:{type:"string",required:!1}}}},s={url:"string"},a={fileIds:{type:"fileId",required:!0},options:{type:"object",required:!1,rule:{maxAge:{type:"int",require:!1}}}};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}(r);function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);n=t.call(this,e);for(var o=0,c=Object.keys(i);o<c.length;o++){var s=c[o],a=s.match(/ruleOf([a-zA-Z]+)/)[1];n.p.addRule(a[0].toLowerCase()+a.slice(1),i[s])}return n}return r}(o.Validator),h=r("./node_modules/mime/lite.js"),y=r.n(h),m=r("../../node_modules/crypto-js/index.js"),v=r.n(m),b=Object(o.MPServerlessErrorClass)({InterfaceError:{code:"InterfaceError",message:"接口响应失败"}});function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){w(i,n,o,c,s,"next",e)}function s(e){w(i,n,o,c,s,"throw",e)}c(void 0)}))}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function k(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function A(e){return{id:e.id,key:e.ossPath,host:e.host,policy:e.policy,Signature:e.signature,OSSAccessKeyId:e.accessKeyId,securityToken:e.securityToken,cdnDomain:e.cdnDomain,ossCallbackUrl:e.ossCallbackUrl}}var R,B=["Expires","Cache-Control","Content-Type","Content-Encoding","Content-Disposition"],D=["jpg","jpeg","png","gif","webp","bmp","wbmp","svg","image","audio","au","mp2","mp3","3gpp","mp4","mpeg","flv","avi","video","wmv","mpg","mpga","pdf","xls","xlsx","doc","docx","ppt","pptx","txt"];!function(e){e.PUBLIC="public";e.PRIVATE="private"}(R||(R={}));var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return k(this,r)}}(r);function r(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);T(P(i=t.call(this,e)),"upload",void 0);Object(o.assert)(n,"[MPFileService]初始化时缺少参数");Object(o.assert)(n.uploadFile,"[MPFileService]初始化时缺少 uploadFile 参数");i.upload=n.uploadFile;return i}!function(e,t,r){t&&O(e.prototype,t)}(r,[{key:"deleteFile",value:function(){var e=x(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validate(s,{url:t});(r=this.getEncoder()).setBodyField({method:"serverless.file.resource.delete",params:{id:t}});e.next=5;return this.transport.request(r);case 5:n=e.sent;return e.abrupt("return",n.body);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=x(regeneratorRuntime.mark((function e(t){var r,n,i,s,a,u,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validate(c,{options:t});r=t.filePath.replace(/(.*):\/\//,"");n=r.split(".").pop();Object(o.assert)(D.indexOf(n.toLowerCase())>=0,"[MPFileService]目前不支持 ".concat(n," 类型文件"));i=Object.keys(t.meta||{}).reduce((function(e,r){e["x-oss-meta-".concat(r)]=t.meta[r];return e}),{});s=t.headers?B.reduce((function(e,r){var n=r.replace(/\-[A-Z]/g,(function(e){return e[1]})).replace(/^[A-Z]/,(function(e){return e.toLowerCase()}));t.headers.hasOwnProperty(n)&&(e[r]=t.headers[n]);return e}),{}):{};e.next=8;return this.getOSSUploadOptionsFromPath(r,t.path,t.fileSize,t.cloudPath);case 8:if(!(a=e.sent).error){e.next=11;break}throw new b.InterfaceError;case 11:u=A(a.result);l=["key","policy","Signature","OSSAccessKeyId"].reduce((function(e,t){e[t]=u[t];return e}),{});f={"X-OSS-server-side-encrpytion":"AES256"};if(t.extension){p=y.a.getType(t.extension);f["Content-Type"]=p}s["Cache-Control"]="max-age=2592000";u.securityToken&&(s["x-oss-security-token"]=u.securityToken);if(u.ossCallbackUrl){d=JSON.stringify({callbackUrl:u.ossCallbackUrl,callbackBody:JSON.stringify({fileId:u.id,spaceId:this.transport.spaceIdOption}),callbackBodyType:"application/json"});s.callback=v.a.enc.Utf8.parse(d).toString(v.a.enc.Base64)}e.next=20;return this.upload({url:"https://".concat(u.host),formData:Object.assign({success_action_status:200},s,i,l),name:"file",fileName:"file",filePath:t.filePath,fileType:"image",header:f});case 20:if(u.ossCallbackUrl){e.next=23;break}e.next=23;return this.reportOSSUpload(u.id,y.a.getType(t.extension));case 23:return e.abrupt("return",{fileUrl:"https://".concat(u.cdnDomain,"/").concat(u.key),filePath:u.key,fileId:u.id});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"info",value:function(){var e=x(regeneratorRuntime.mark((function e(t,r){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validate(a,{fileIds:t,options:r});n="string"==typeof t?t:t.join(",");(o=this.getEncoder()).setBodyField({method:"serverless.file.resource.info",params:_({id:n},r||{})});e.next=6;return this.transport.request(o);case 6:i=e.sent;return e.abrupt("return",i.body&&i.body.result||[]);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getOSSUploadOptionsFromPath",value:function(){var e=x(regeneratorRuntime.mark((function e(t,r,n,o){var i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i={env:R.PUBLIC}).filename=t.split("/").pop();i.size=n;r&&(i.targetPath=r);o&&(i.fileId=o);(c=this.getEncoder()).setBodyField({method:"serverless.file.resource.generateProximalSign",params:i});e.next=9;return this.transport.request(c);case 9:s=e.sent;return e.abrupt("return",s.body);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n,o){return e.apply(this,arguments)}}()},{key:"reportOSSUpload",value:function(){var e=x(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.transport.getEncoder();o={id:t};r&&(o.contentType=r);n.setBodyField({method:"serverless.file.resource.report",params:o});e.next=6;return this.transport.request(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validate",value:function(e,t){var r=new d;try{r.validate(e,t)}catch(e){throw e}}}]);return r}(o.BaseService)},"@alicloud/mpserverless-core":function(t,r){t.exports=e}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-function-service/dist/index.js":function(e,t,r){e.exports=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"FunctionService",(function(){return y}));var n=r("@alicloud/mpserverless-core"),o={functionTarget:{type:"string",allowEmpty:!1}};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function u(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}(r);function r(){l(this,r);return t.apply(this,arguments)}!function(e,t,r){t&&f(e.prototype,t)}(r,[{key:"invoke",value:function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){u(i,n,o,c,s,"next",e)}function s(e){u(i,n,o,c,s,"throw",e)}c(void 0)}))}}(regeneratorRuntime.mark((function e(t){var r,i,c,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>1&&void 0!==a[1]?a[1]:{};this.validate(o,{functionTarget:t});if(!("number"==typeof r&&isNaN(r)||null==r)){e.next=4;break}throw new n.bizError.ValidationError;case 4:(i=this.getEncoder()).setBodyField({method:"serverless.function.runtime.invoke",params:{functionTarget:t,functionArgs:r}});e.next=8;return this.transport.request(i);case 8:c=e.sent;return e.abrupt("return",s(s({},c.body),{},{requestId:c.headers["request-id"]}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validate",value:function(e,t){var r=new n.Validator;try{r.validate(e,t)}catch(e){throw e}}}]);return r}(n.BaseService)},"@alicloud/mpserverless-core":function(t,r){t.exports=e}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-proxy-service/dist/index.js":function(e,t,r){e.exports=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"ProxyService",(function(){return l}));function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&s(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}(r);function r(){i(this,r);return t.apply(this,arguments)}!function(e,t,r){t&&c(e.prototype,t)}(r,[{key:"forward",value:function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var c=e.apply(t,r);function s(e){o(c,n,i,s,a,"next",e)}function a(e){o(c,n,i,s,a,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.getEncoder()).setBodyField({method:t,params:r});e.next=4;return this.transport.request(n);case 4:o=e.sent;return e.abrupt("return",o.body);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]);return r}(r("@alicloud/mpserverless-core").BaseService)},"@alicloud/mpserverless-core":function(t,r){t.exports=e}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-user-service/dist/index.js":function(e,t,r){e.exports=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};r.t=function(e,t){1&t&&(e=r(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"AuthType",(function(){return n}));r.d(t,"UserService",(function(){return g}));var n,o=r("@alicloud/mpserverless-core"),i={options:{type:"object",rule:{authType:{type:"enum",required:!1,values:["anonymous",""]},authProvider:{type:"enum",required:!1,values:["alipay_openapi","wechat_openapi","dingtalk_openapi"]}}}},c={options:{type:"object",required:!1,rule:{authProvider:{type:"enum",required:!1,values:["alipay_openapi","wechat_openapi","dingtalk_openapi"]}}}},s=Object(o.MPServerlessErrorClass)({UnauthorizedError:{code:"UnauthorizedError",message:"未授权错误"}});function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){f(i,n,o,c,s,"next",e)}function s(e){f(i,n,o,c,s,"throw",e)}c(void 0)}))}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function y(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}!function(e){e.ANONYMOUS="anonymous";e.DEFAULT=""}(n||(n={}));var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}(r);function r(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);b(m(i=t.call(this,e)),"pendingRequest",void 0);b(m(i),"scope","auth_base");b(m(i),"appId",void 0);b(m(i),"appSecret",void 0);b(m(i),"isvAppId",void 0);b(m(i),"ua",void 0);b(m(i),"authorizeOptions",void 0);b(m(i),"accessToken",void 0);b(m(i),"getAuthCode",void 0);b(m(i),"httpRequest",void 0);b(m(i),"currentAuthType",void 0);Object(o.assert)(n.getAuthCode,"[UserService]初始化时缺少 getAuthCode 参数");Object(o.assert)(n.request,"[UserService]初始化时缺少 request 参数");Object(o.assert)(n.appId,"[UserService]初始化时缺少 appId 参数");Object(o.assert)(n.appSecret,"[UserService]初始化时缺少 appSecret 参数");i.getAuthCode=n.getAuthCode;i.httpRequest=n.request;i.appId=n.appId;i.appSecret=n.appSecret;i.isvAppId=n.isvAppId;i.ua=n.ua;return i}!function(e,t,r){t&&d(e.prototype,t)}(r,[{key:"authorize",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:{authType:n.DEFAULT,authProvider:"alipay_openapi"};this.validate(i,{options:t});if(t.authType!==n.ANONYMOUS){e.next=10;break}e.next=5;return this.anonymousAuthorizeHandler(t);case 5:if(!this.accessToken){e.next=7;break}return e.abrupt("return",{success:!0});case 7:return e.abrupt("return",{success:!1});case 10:if(this.accessToken&&(!this.accessToken||this.currentAuthType===t.authType)){e.next=16;break}e.next=13;return this.authorizeHandler(t);case 13:if(!this.accessToken){e.next=15;break}return e.abrupt("return",{success:!0});case 15:return e.abrupt("return",{success:!1});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInfo",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validate(c,{options:t});r=this.getEncoder();n={};this.authorizeOptions&&(n=l({},this.authorizeOptions));t&&(n=l({},t));this.currentAuthType&&(n={authType:this.currentAuthType});r.setBodyField({method:"serverless.auth.user.getProfileInfo",params:n});e.next=9;return this.transport.request(r);case 9:o=e.sent;return e.abrupt("return",o.body);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRequestToken",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]&&o[1];if(!this.pendingRequest){e.next=5;break}this.transport.logger.info("[UserService]pendingRequest...");e.next=5;return this.pendingRequest;case 5:if(this.accessToken){e.next=7;break}throw new s.UnauthorizedError("[UserService]未进行用户授权，请先手动调用三方授权或匿名授权方法");case 7:if(!r||!this.authorizeOptions){e.next=16;break}this.transport.logger.info("getAccessToken: start");if(this.authorizeOptions.authType!==n.ANONYMOUS){e.next=14;break}e.next=12;return this.anonymousAuthorizeHandler(this.authorizeOptions);case 12:e.next=16;break;case 14:e.next=16;return this.authorizeHandler(this.authorizeOptions);case 16:t.setBodyField({token:this.accessToken});t.sign(this.appSecret);t.setBaseHeaders({"Content-Type":"application/json","x-basement-token":this.accessToken});return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"authorizeHandler",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pendingRequest=this.getAuthCode({scopes:this.scope}).then((function(e){r.transport.logger.info("[UserService]Request authcode is ".concat(e.body.authCode," "));return e.body.authCode})).then((function(e){var n=r.getEncoder();n.setBodyField({method:"serverless.auth.user.authorize",params:{authProvider:t.authProvider||"alipay_openapi",clientIdentifier:r.appId,authCode:e,isvAppId:r.isvAppId}});n.sign(r.appSecret);n.setBaseHeaders({"Content-Type":"application/json"});r.ua&&n.setBaseHeaders({"x-serverless-ua":r.ua});var o=n.encodeAsHTTPRequestObject({timeout:r.transport.timeoutOption,dataType:"json"});return r.httpRequest(o)})).then((function(e){r.transport.logger.info("[UserService]Request accessToken "+(e.body.success?"success":"failed"));if(e.body&&e.body.result){r.authorizeOptions=t;r.accessToken=e.body.result.accessToken;r.currentAuthType=n.DEFAULT}r.pendingRequest=null;return Promise.resolve(r.accessToken)}));return e.abrupt("return",this.pendingRequest);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"anonymousAuthorizeHandler",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var r,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.getEncoder()).setBodyField({method:"serverless.auth.user.anonymousAuthorize",params:{clientIdentifier:this.appId,isvAppId:this.isvAppId}});r.sign(this.appSecret);r.setBaseHeaders({"Content-Type":"application/json"});this.ua&&r.setBaseHeaders({"x-serverless-ua":this.ua});o=r.encodeAsHTTPRequestObject({timeout:this.transport.timeoutOption,dataType:"json"});this.pendingRequest=this.httpRequest(o).then((function(e){i.transport.logger.info("[UserService]Request accessToken "+(e.body.success?"success":"failed"));if(e.body&&e.body.result){i.authorizeOptions=t;i.accessToken=e.body.result.accessToken;i.currentAuthType=n.ANONYMOUS}i.pendingRequest=null;return Promise.resolve(i.accessToken)}));return e.abrupt("return",this.pendingRequest);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validate",value:function(e,t){var r=new o.Validator;try{r.validate(e,t)}catch(e){throw e}}}]);return r}(o.BaseService)},"@alicloud/mpserverless-core":function(t,r){t.exports=e}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./src/index.ts":function(e,t,r){"use strict";r.r(t);r.d(t,"MPServerless",(function(){return w}));var n,o=r("./node_modules/@alicloud/mpserverless-miniapp-core/dist/index.js"),i=r("./node_modules/@alicloud/mpserverless-core/dist/index.js"),c=Object(i.MPServerlessErrorClass)({UnsupportPlatformError:{code:"UnsupportPlatformError",message:"无支持平台错误"}});function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){r(e);return}s.done?t(a):Promise.resolve(a).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){l(i,n,o,c,s,"next",e)}function s(e){l(i,n,o,c,s,"throw",e)}c(void 0)}))}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}!function(e){e.WECHAT="wechat";e.ALIPAY="alipay";e.DINGTALK="dingtalk"}(n||(n={}));var g=function(){return"undefined"!=typeof dd&&dd&&0!==Object.keys(dd).length?n.DINGTALK:"undefined"!=typeof wx&&wx&&0!==Object.keys(wx).length?n.WECHAT:"undefined"!=typeof my&&my&&0!==Object.keys(my).length?n.ALIPAY:void 0},j=function(e){switch(e){case n.ALIPAY:return my.getAuthCode;case n.DINGTALK:return dd.getAuthCode;default:return null}},_=function(e){if("string"==typeof e)return e;switch(g()){case n.ALIPAY:return e.alipay;case n.WECHAT:return e.wechat;case n.DINGTALK:return e.dingtalk;default:throw new c.UnsupportPlatformError("[MPServerless SDK]当前 SDK 并未支持该小程序平台，敬请期待")}},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&d(e,t)}(r,e);var t=h(r);function r(e,o){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);b(m(i=t.call(this,{request:function(t){g()===n.DINGTALK&&(t.data=JSON.stringify(t.data));t.header=t.header||t.headers;var r=e.request||e.httpRequest;return i.wrap(r)(t)},getAuthCode:function(){var t=f(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=j(g())||e.getAuthCode||e.login;t.next=3;return i.wrap(n)(r);case 3:(o=t.sent).authCode=o.authCode||o.code;return t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),uploadFile:function(t){return i.wrap(e.uploadFile)(t)},getFileUploadInfo:function(t){var r=0,n="";return(e.getFileInfo&&i.wrap(e.getFileInfo)||function(){return new Promise((function(e){return e({size:0})}))})({filePath:t.filePath,apFilePath:t.filePath}).then((function(n){n.size&&(r=n.size);return i.wrap(e.getImageInfo)({src:t.filePath})})).then((function(e){e.type&&(n=e.type);return{fileSize:r,fileExtension:n}})).catch((function(e){throw e}))}},u(u({},o),{},{appId:_(o.appId)}))),"platform",void 0);i.platform=g();return i}!function(e,t,r){t&&p(e.prototype,t);r&&p(e,r)}(r,[{key:"authProvider",get:function(){switch(this.platform){case n.ALIPAY:return"alipay_openapi";case n.WECHAT:return"wechat_openapi";case n.DINGTALK:return"dingtalk_openapi";default:throw new c.UnsupportPlatformError("[MPServerless SDK]当前 SDK 并未支持该小程序平台，敬请期待")}}},{key:"init",value:function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&"anonymous"===t.authorType||t&&"anonymous"===t.authType)){e.next=6;break}e.next=3;return this.user.authorize({authType:"anonymous"});case 3:return e.abrupt("return",e.sent);case 6:e.next=8;return this.user.authorize({authProvider:this.authProvider});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wrap",value:function(e){return function(t){return new Promise((function(r){e(Object.assign(t,{complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.headers=e.headers||e.header;return r(e)}}))}))}}}]);return r}(o.MPServerlessMiniAppCore);t.default=w}}).MPServerless}));